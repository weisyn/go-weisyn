// Package block 提供区块构建的公共接口定义
//
// 📦 **区块构建接口 (Block Builder)**
//
// 本包定义 WES 系统的区块构建接口，遵循 CQRS 架构原则，
// 专注于区块的构建操作。
//
// 🎯 **核心职责**：
// - 创建挖矿候选区块
//
// 🏗️ **设计原则**：
// - CQRS 写路径：区块构建属于写操作
// - 职责单一：只负责区块构建
//
// 详细使用说明请参考：pkg/interfaces/block/README.md
package block

import (
	"context"
)

// BlockBuilder 区块构建接口（写操作）
//
// 🎯 **核心职责**：
// 提供区块构建操作，支持矿工挖矿场景。
//
// 💡 **设计理念**：
// - 只包含构建操作，不包含验证和处理（由其他接口提供）
// - 返回区块哈希，减少网络传输开销
// - 支持缓存机制，候选区块保存在内存缓存中
//
// 📞 **调用方**：
// - ConsensusService：矿工挖矿时创建候选区块
//
// ⚠️ **核心约束**：
// - 只写不读：所有方法都是构建操作
// - 候选区块：返回的是候选区块哈希，完整区块在缓存中
type BlockBuilder interface {
	// CreateMiningCandidate 创建挖矿候选区块并返回区块哈希
	//
	// 创建挖矿候选区块供矿工挖矿。
	// 候选区块保存在内存缓存中，返回区块哈希作为标识符。
	//
	// 参数：
	//   - ctx: 上下文对象
	//
	// 返回：
	//   - []byte: 候选区块哈希（32字节）
	//   - error: 创建错误，nil表示成功
	//
	// 使用场景：
	//   - 矿工挖矿前创建候选区块
	//   - 共识引擎的区块模板管理
	//
	// 说明：
	//   - 候选区块保存在内存缓存中，通过哈希获取
	//   - 矿工可以修改区块（如添加POW字段）
	CreateMiningCandidate(ctx context.Context) ([]byte, error)
}
