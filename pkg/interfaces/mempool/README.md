# Mempool å†…å­˜æ± æ¥å£ï¼ˆpkg/interfaces/mempoolï¼‰

> **ğŸ“Œ æ¨¡å—ç±»å‹**ï¼š`[ ] å®ç°æ¨¡å—` `[âœ“] æ¥å£å®šä¹‰` `[ ] æ•°æ®ç»“æ„` `[ ] å·¥å…·/å…¶ä»–`

---

## ğŸ“ **æ¨¡å—å®šä½**

ã€€ã€€æœ¬æ¨¡å—æ˜¯WESç³»ç»Ÿä¸­**å†…å­˜æ± å±‚**çš„**å…¬å…±æ¥å£å®šä¹‰**ï¼Œæä¾›äº¤æ˜“æ± å’Œå€™é€‰åŒºå—æ± çš„ç»Ÿä¸€ç®¡ç†æ¥å£ï¼Œè´Ÿè´£äº¤æ˜“å’Œå€™é€‰åŒºå—çš„æš‚å­˜ã€æ’åºã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚

**è§£å†³ä»€ä¹ˆé—®é¢˜**ï¼š
- **äº¤æ˜“æš‚å­˜é—®é¢˜**ï¼šç”¨æˆ·æäº¤çš„äº¤æ˜“éœ€è¦æš‚å­˜ç­‰å¾…è¢«æ‰“åŒ…
- **å€™é€‰åŒºå—ç®¡ç†**ï¼šPoWæŒ–çŸ¿äº§ç”Ÿçš„å€™é€‰åŒºå—éœ€è¦æš‚å­˜ç­‰å¾…å…±è¯†é€‰æ‹©
- **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šäº¤æ˜“å’Œå€™é€‰åŒºå—çš„çŠ¶æ€è½¬æ¢å’Œè¶…æ—¶æ¸…ç†

**ä¸è§£å†³ä»€ä¹ˆé—®é¢˜**ï¼ˆè¾¹ç•Œï¼‰ï¼š
- **äº¤æ˜“éªŒè¯é€»è¾‘**ï¼šç”±TransactionValidatorè´Ÿè´£ï¼Œæ± åªå­˜å‚¨å·²éªŒè¯äº¤æ˜“
- **UTXOçŠ¶æ€ç®¡ç†**ï¼šç”±UTXOManagerè´Ÿè´£ï¼Œæ± ä¸å…³å¿ƒUTXOç»†èŠ‚
- **åŒºå—éªŒè¯é€»è¾‘**ï¼šç”±BlockValidatorè´Ÿè´£ï¼Œæ± åªå­˜å‚¨å·²éªŒè¯å€™é€‰åŒºå—
- **å…±è¯†é€‰æ‹©é€»è¾‘**ï¼šç”±ConsensusEngineè´Ÿè´£ï¼Œæ± åªæä¾›å€™é€‰åŒºå—åˆ—è¡¨

---

## ğŸ¯ **è®¾è®¡åŸåˆ™ä¸æ ¸å¿ƒçº¦æŸ**

### **è®¾è®¡åŸåˆ™**

| åŸåˆ™ | è¯´æ˜ | ä»·å€¼ |
|------|------|------|
| **çº¯ç²¹å®¹å™¨** | åªè´Ÿè´£å­˜å‚¨å’Œæ£€ç´¢ï¼Œä¸å¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘ | èŒè´£æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ |
| **åŒæ± åˆ†ç¦»** | äº¤æ˜“æ± å’Œå€™é€‰åŒºå—æ± å®Œå…¨ç‹¬ç«‹ç®¡ç† | é¿å…ç›¸äº’å¹²æ‰°ï¼Œæå‡å¹¶å‘æ€§èƒ½ |
| **çŠ¶æ€æœºç®¡ç†** | ä¸¥æ ¼çš„çŠ¶æ€è½¬æ¢è§„åˆ™å’Œç”Ÿå‘½å‘¨æœŸç®¡ç† | ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ |
| **è‡ªè¿è¡Œè®¾è®¡** | ä¸æš´éœ²æ— æ„ä¹‰çš„ç›‘æ§ç»Ÿè®¡æ¥å£ | é¿å…è¿‡åº¦å·¥ç¨‹åŒ– |

### **æ ¸å¿ƒçº¦æŸ** â­

**ä¸¥æ ¼éµå®ˆ**ï¼š
- âœ… **åªå­˜å‚¨å·²éªŒè¯æ•°æ®**ï¼šæ± åªæ¥å—é€šè¿‡å®Œæ•´éªŒè¯çš„äº¤æ˜“å’ŒåŒºå—
- âœ… **çŠ¶æ€è½¬æ¢åŸå­æ€§**ï¼šäº¤æ˜“/åŒºå—çŠ¶æ€è½¬æ¢å¿…é¡»æ˜¯åŸå­æ“ä½œ
- âœ… **å†…å­˜é™åˆ¶ä¸¥æ ¼æ‰§è¡Œ**ï¼šè¶…è¿‡å†…å­˜é™åˆ¶æ—¶æ‹’ç»æ–°æ•°æ®æˆ–æ·˜æ±°ä½ä¼˜å…ˆçº§æ•°æ®
- âœ… **å¹¶å‘å®‰å…¨**ï¼šæ‰€æœ‰publicæ–¹æ³•å¿…é¡»æ˜¯å¹¶å‘å®‰å…¨çš„

**ä¸¥æ ¼ç¦æ­¢**ï¼š
- âŒ **ä¸è¿›è¡ŒéªŒè¯**ï¼šæ± ä¸éªŒè¯äº¤æ˜“åˆæ³•æ€§æˆ–åŒºå—æœ‰æ•ˆæ€§
- âŒ **ä¸ç®¡ç†UTXO**ï¼šä¸è·Ÿè¸ªUTXOå¼•ç”¨ï¼Œä¸æ£€æµ‹åŒé‡èŠ±è´¹
- âŒ **ä¸æš´éœ²æ— æ„ä¹‰ç»Ÿè®¡**ï¼šä¸æä¾›GetStats/GetPoolStatusç­‰ç›‘æ§æ¥å£
- âŒ **ä¸å¤„ç†ç½‘ç»œä¼ æ’­**ï¼šä¸è´Ÿè´£äº¤æ˜“/åŒºå—çš„P2På¹¿æ’­

---

## ğŸ—ï¸ **æ¶æ„è®¾è®¡**

### **æ•´ä½“æ¶æ„**

```mermaid
graph TB
    subgraph "Mempoolå†…å­˜æ± å±‚æ¶æ„"
        subgraph "æœ¬æ¨¡å— - Mempoolæ¥å£å±‚"
            TXPOOL["TxPool<br/>ğŸ¯ äº¤æ˜“æ± <br/>15ä¸ªæ ¸å¿ƒæ–¹æ³•"]
            CANDPOOL["CandidatePool<br/>ğŸ¯ å€™é€‰åŒºå—æ± <br/>13ä¸ªæ ¸å¿ƒæ–¹æ³•"]
        end
        
        subgraph "ä¸Šæ¸¸ - ä¸šåŠ¡æ¨¡å—"
            SUBMIT["TransactionSubmitter<br/>ğŸ”¼ æäº¤å·²éªŒè¯äº¤æ˜“"]
            CONSENSUS["ConsensusEngine<br/>ğŸ”¼ æŒ–çŸ¿ã€å€™é€‰åŒºå—ç®¡ç†"]
            BLOCKCHAIN["BlockService<br/>ğŸ”¼ åŒºå—ç¡®è®¤ã€çŠ¶æ€åŒæ­¥"]
        end
        
        subgraph "ä¸‹æ¸¸ - æ”¯æ’‘æœåŠ¡"
            TX_VERIFY["tx.TxVerifier<br/>ğŸ”½ äº¤æ˜“éªŒè¯ï¼ˆå…¥æ± å‰ï¼‰"]
            NETWORK["network.Network<br/>ğŸ”½ äº¤æ˜“/åŒºå—ä¼ æ’­"]
            EVENT["event.EventBus<br/>ğŸ”½ çŠ¶æ€å˜æ›´äº‹ä»¶"]
        end
    end
    
    SUBMIT --> TXPOOL
    CONSENSUS --> TXPOOL
    CONSENSUS --> CANDPOOL
    BLOCKCHAIN --> TXPOOL
    BLOCKCHAIN --> CANDPOOL
    
    TXPOOL -.-> TX_VERIFY
    TXPOOL -.-> NETWORK
    TXPOOL -.-> EVENT
    CANDPOOL -.-> NETWORK
    CANDPOOL -.-> EVENT
    
    style TXPOOL fill:#FFD700
    style CANDPOOL fill:#FFD700
```

### **åŒæ± æ¶æ„**

```mermaid
graph TB
    subgraph "åŒæ± æ¶æ„è®¾è®¡"
        subgraph "äº¤æ˜“æ± ï¼ˆTxPoolï¼‰"
            PENDING["Pending Queue<br/>å¾…å¤„ç†äº¤æ˜“<br/>æŒ‰è´¹ç‡æ’åº"]
            MINING["Mining Queue<br/>æŒ–çŸ¿ä¸­äº¤æ˜“<br/>é”å®šçŠ¶æ€"]
            CONFIRMED["Confirmed Set<br/>å·²ç¡®è®¤äº¤æ˜“<br/>ç­‰å¾…æ¸…ç†"]
        end
        
        subgraph "å€™é€‰åŒºå—æ± ï¼ˆCandidatePoolï¼‰"
            CANDIDATES["Candidates Map<br/>å€™é€‰åŒºå—é›†åˆ<br/>æŒ‰é«˜åº¦åˆ†ç»„"]
            TIMEOUT["Timeout Checker<br/>è¶…æ—¶æ¸…ç†<br/>å®šæœŸæ‰§è¡Œ"]
        end
        
        subgraph "å…±äº«æœºåˆ¶"
            MEM["Memory Monitor<br/>å†…å­˜ç›‘æ§"]
            EVENT2["Event Publisher<br/>äº‹ä»¶å‘å¸ƒ"]
        end
    end
    
    PENDING -->|"çŸ¿å·¥é€‰æ‹©"| MINING
    MINING -->|"åŒºå—ç¡®è®¤"| CONFIRMED
    CONFIRMED -->|"æ¸…ç†"| PENDING
    
    CANDIDATES -->|"è¶…æ—¶"| TIMEOUT
    TIMEOUT -->|"æ¸…ç†"| CANDIDATES
    
    MEM -.-> PENDING
    MEM -.-> CANDIDATES
    
    EVENT2 -.-> PENDING
    EVENT2 -.-> MINING
    EVENT2 -.-> CANDIDATES
    
    style PENDING fill:#90EE90
    style MINING fill:#FFB6C1
    style CANDIDATES fill:#87CEEB
```

**åŒæ± è®¾è®¡ä»·å€¼**ï¼š
- âœ… **èŒè´£åˆ†ç¦»**ï¼šäº¤æ˜“æ± ç®¡ç†äº¤æ˜“ï¼Œå€™é€‰åŒºå—æ± ç®¡ç†å€™é€‰åŒºå—ï¼Œäº’ä¸å¹²æ‰°
- âœ… **å¹¶å‘ä¼˜åŒ–**ï¼šä¸¤ä¸ªæ± å¯ä»¥ç‹¬ç«‹åŠ é”ï¼Œæå‡å¹¶å‘æ€§èƒ½
- âœ… **å†…å­˜éš”ç¦»**ï¼šåˆ†åˆ«ç®¡ç†å†…å­˜é™åˆ¶ï¼Œé¿å…ä¸€æ–¹å ç”¨è¿‡å¤šå†…å­˜
- âœ… **ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹**ï¼šäº¤æ˜“å’Œå€™é€‰åŒºå—æœ‰ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ç­–ç•¥

### **äº¤æ˜“ç”Ÿå‘½å‘¨æœŸ**

```mermaid
stateDiagram-v2
    [*] --> Pending: SubmitTx<br/>(å·²éªŒè¯)
    Pending --> Mining: MarkAsMining<br/>(çŸ¿å·¥é€‰æ‹©)
    Mining --> PendingConfirm: MarkAsPendingConfirm<br/>(åŒºå—æŒ–å‡º)
    Mining --> Pending: RejectTransactions<br/>(æŒ–çŸ¿å¤±è´¥)
    PendingConfirm --> Confirmed: ConfirmTransactions<br/>(åŒºå—ç¡®è®¤)
    Confirmed --> [*]: æ¸…ç†
    
    Pending --> Expired: è¶…æ—¶
    Expired --> [*]: æ¸…ç†
    
    Pending --> Rejected: UpdateTransactionStatus<br/>(éªŒè¯å¤±è´¥)
    Rejected --> [*]: æ¸…ç†
    
    note right of Pending
        çŠ¶æ€ï¼šå¯è¢«é€‰æ‹©æ‰“åŒ…
        ç‰¹å¾ï¼šæŒ‰è´¹ç‡æ’åº
        æ“ä½œï¼šéšæ—¶å¯è¢«çŸ¿å·¥é€‰æ‹©
    end note
    
    note right of Mining
        çŠ¶æ€ï¼šè¢«çŸ¿å·¥é”å®š
        ç‰¹å¾ï¼šä¸å¯è¢«å…¶ä»–çŸ¿å·¥é€‰æ‹©
        æ“ä½œï¼šç­‰å¾…æŒ–çŸ¿ç»“æœ
    end note
    
    note right of PendingConfirm
        çŠ¶æ€ï¼šåŒºå—å·²æŒ–å‡ºï¼Œç­‰å¾…ç½‘ç»œç¡®è®¤
        ç‰¹å¾ï¼šçŸ­æš‚çŠ¶æ€
        æ“ä½œï¼šç­‰å¾…åŒºå—ç¡®è®¤
    end note
```

### **å±‚æ¬¡è¯´æ˜**

| å±‚æ¬¡/ç»„ä»¶ | æ ¸å¿ƒèŒè´£ | å…³é”®æœºåˆ¶ | çº¦æŸ |
|----------|---------|---------|------|
| **TxPool** | äº¤æ˜“æš‚å­˜å’Œç”Ÿå‘½å‘¨æœŸç®¡ç† | çŠ¶æ€æœºã€ä¼˜å…ˆçº§é˜Ÿåˆ—ã€å†…å­˜é™åˆ¶ | åªå­˜å‚¨å·²éªŒè¯äº¤æ˜“ |
| **CandidatePool** | å€™é€‰åŒºå—æš‚å­˜å’Œç®¡ç† | é«˜åº¦åˆ†ç»„ã€è¶…æ—¶æ¸…ç†ã€VRFæ”¯æŒ | åªå­˜å‚¨å·²éªŒè¯å€™é€‰åŒºå— |
| **çŠ¶æ€è½¬æ¢** | äº¤æ˜“çŠ¶æ€æµè½¬æ§åˆ¶ | åŸå­æ“ä½œã€äº‹ä»¶å‘å¸ƒ | çŠ¶æ€è½¬æ¢å¿…é¡»åˆæ³• |
| **å†…å­˜ç®¡ç†** | å†…å­˜ä½¿ç”¨ç›‘æ§å’Œé™åˆ¶ | LRUæ·˜æ±°ã€å†…å­˜ä¼°ç®— | è¶…è¿‡é™åˆ¶æ—¶æ‹’ç»æˆ–æ·˜æ±° |

---

## ğŸ”— **ä¾èµ–ä¸åä½œ**

### **ä¾èµ–å…³ç³»å›¾**

```mermaid
graph LR
    subgraph "Mempoolä¾èµ–é“¾è·¯"
        THIS[Mempoolæ¥å£]
        
        TX_VER["pkg/interfaces/tx<br/>ğŸ”¹ TxVerifieräº¤æ˜“éªŒè¯<br/>ğŸ”¹ å…¥æ± å‰è°ƒç”¨"]
        NET2["pkg/interfaces/network<br/>ğŸ”¹ Networkä¼ æ’­<br/>ğŸ”¹ å¹¿æ’­äº¤æ˜“/åŒºå—"]
        EVENT3["pkg/interfaces/infrastructure/event<br/>ğŸ”¹ EventBusäº‹ä»¶<br/>ğŸ”¹ çŠ¶æ€å˜æ›´é€šçŸ¥"]
        PB_TX3["pb/blockchain/block/transaction<br/>ğŸ”¹ Transactionç»“æ„"]
        PB_BLOCK["pb/blockchain/block<br/>ğŸ”¹ Blockç»“æ„"]
    end
    
    TX_VER --> THIS
    NET2 --> THIS
    EVENT3 --> THIS
    PB_TX3 --> THIS
    PB_BLOCK --> THIS
    
    style THIS fill:#FFD700
```

### **ä¾èµ–è¯´æ˜**

| ä¾èµ–æ¨¡å— | ä¾èµ–æ¥å£ | ç”¨é€” | çº¦æŸæ¡ä»¶ |
|---------|---------|------|---------|
| **tx** | TxVerifier | äº¤æ˜“å…¥æ± å‰å¿…é¡»é€šè¿‡éªŒè¯ | TransactionSubmitterè´Ÿè´£è°ƒç”¨éªŒè¯ |
| **network** | Network | å¹¿æ’­æ–°äº¤æ˜“å’Œå€™é€‰åŒºå— | å¼‚æ­¥å¹¿æ’­ï¼Œä¸é˜»å¡å…¥æ±  |
| **event** | EventBus | å‘å¸ƒçŠ¶æ€å˜æ›´äº‹ä»¶ | ç”¨äºç³»ç»Ÿå†…éƒ¨é€šçŸ¥ |
| **pb/transaction** | Transaction | äº¤æ˜“æ•°æ®ç»“æ„ | ä½¿ç”¨Protobufæ ‡å‡†ç»“æ„ |
| **pb/block** | Block | åŒºå—æ•°æ®ç»“æ„ | ä½¿ç”¨Protobufæ ‡å‡†ç»“æ„ |

---

## ğŸ”Œ **æ¥å£è®¾è®¡**

### **æ¥å£å…¨æ™¯**

```mermaid
classDiagram
    class TxPool {
        <<interface>>
        +SubmitTx(tx) ([]byte, error)
        +SubmitTxs(txs) ([][]byte, error)
        +GetTransactionsForMining() ([]*Transaction, error)
        +MarkTransactionsAsMining(txIDs) error
        +ConfirmTransactions(txIDs, blockHeight) error
        +RejectTransactions(txIDs) error
        +MarkTransactionsAsPendingConfirm(txIDs, blockHeight) error
        +SyncStatus(height, stateRoot) error
        +UpdateTransactionStatus(txID, status) error
        +GetAllPendingTransactions() ([]*Transaction, error)
        +GetTx(txID) (*Transaction, error)
        +GetTxStatus(txID) (TxStatus, error)
        +GetTransactionsByStatus(status) ([]*Transaction, error)
        +GetTransactionByID(txID) (*Transaction, error)
        +GetPendingTransactions() ([]*Transaction, error)
    }
    
    class CandidatePool {
        <<interface>>
        +AddCandidate(block, fromPeer) ([]byte, error)
        +AddCandidates(blocks, fromPeers) ([][]byte, error)
        +GetCandidatesForHeight(height, timeout) ([]*CandidateBlock, error)
        +GetAllCandidates() ([]*CandidateBlock, error)
        +WaitForCandidates(minCount, timeout) ([]*CandidateBlock, error)
        +GetCandidateHashes() ([][]byte, error)
        +GetCandidateByHash(blockHash) (*CandidateBlock, error)
        +ClearCandidates() (int, error)
        +ClearExpiredCandidates(maxAge) (int, error)
        +ClearOutdatedCandidates() (int, error)
        +RemoveCandidate(blockHash) error
    }
    
    TxPool ..> Transaction : ç®¡ç†
    CandidatePool ..> Block : ç®¡ç†
```

### **æ¥å£è¯´æ˜**

| æ¥å£ | æ ¸å¿ƒèŒè´£ | è®¾è®¡è€ƒè™‘ | çº¦æŸ |
|------|---------|---------|------|
| **TxPool** | äº¤æ˜“æ± ç®¡ç† | çŠ¶æ€æœºã€ä¼˜å…ˆçº§æ’åºã€å¹¶å‘å®‰å…¨ | åªå­˜å‚¨å·²éªŒè¯äº¤æ˜“ |
| **CandidatePool** | å€™é€‰åŒºå—æ± ç®¡ç† | é«˜åº¦åˆ†ç»„ã€è¶…æ—¶æ¸…ç†ã€VRFæ”¯æŒ | åªå­˜å‚¨å·²éªŒè¯å€™é€‰åŒºå— |

### **å…³é”®æ–¹æ³•è¯´æ˜**

**TxPool.SubmitTx**
- **ç”¨é€”**ï¼šæäº¤å·²éªŒè¯çš„äº¤æ˜“åˆ°äº¤æ˜“æ± 
- **å‰ç½®æ¡ä»¶**ï¼š
  - äº¤æ˜“å¿…é¡»å·²é€šè¿‡TransactionValidatorå®Œæ•´éªŒè¯
  - äº¤æ˜“ç­¾åæœ‰æ•ˆ
  - äº¤æ˜“ä¸å­˜åœ¨äºæ± ä¸­
- **åç½®ä¿è¯**ï¼š
  - äº¤æ˜“è¿›å…¥PendingçŠ¶æ€
  - è¿”å›äº¤æ˜“å“ˆå¸Œ
  - å‘å¸ƒTxAddedäº‹ä»¶
- **è¾¹ç•Œæƒ…å†µ**ï¼š
  - äº¤æ˜“å·²å­˜åœ¨ï¼šè¿”å›ErrTxAlreadyExists
  - äº¤æ˜“æ± å·²æ»¡ï¼šè¿”å›ErrPoolFullæˆ–æ·˜æ±°ä½ä¼˜å…ˆçº§äº¤æ˜“
  - nonceé‡å¤ï¼šè¿”å›ErrNonceConflict

**TxPool.GetTransactionsForMining**
- **ç”¨é€”**ï¼šçŸ¿å·¥è·å–ç”¨äºæ‰“åŒ…çš„ä¼˜è´¨äº¤æ˜“
- **å‰ç½®æ¡ä»¶**ï¼šäº¤æ˜“æ± æœ‰pendingäº¤æ˜“
- **åç½®ä¿è¯**ï¼š
  - è¿”å›æŒ‰è´¹ç‡æ’åºçš„äº¤æ˜“åˆ—è¡¨
  - äº¤æ˜“æ•°é‡å’Œå¤§å°ç”±é…ç½®å†³å®š
  - åªè¿”å›PendingçŠ¶æ€çš„äº¤æ˜“
- **è¾¹ç•Œæƒ…å†µ**ï¼š
  - æ± ä¸­æ— äº¤æ˜“ï¼šè¿”å›ç©ºåˆ—è¡¨
  - æ‰€æœ‰äº¤æ˜“éƒ½åœ¨MiningçŠ¶æ€ï¼šè¿”å›ç©ºåˆ—è¡¨

**TxPool.MarkTransactionsAsMining**
- **ç”¨é€”**ï¼šæ ‡è®°äº¤æ˜“ä¸ºæŒ–çŸ¿ä¸­ï¼Œé˜²æ­¢è¢«é‡å¤é€‰æ‹©
- **å‰ç½®æ¡ä»¶**ï¼š
  - äº¤æ˜“å¿…é¡»åœ¨PendingçŠ¶æ€
  - txIDsæœ‰æ•ˆ
- **åç½®ä¿è¯**ï¼š
  - äº¤æ˜“çŠ¶æ€å˜ä¸ºMining
  - å‘å¸ƒTxStatusChangedäº‹ä»¶
  - äº¤æ˜“ä¸ä¼šè¢«å…¶ä»–çŸ¿å·¥é€‰æ‹©
- **è¾¹ç•Œæƒ…å†µ**ï¼š
  - äº¤æ˜“ä¸åœ¨PendingçŠ¶æ€ï¼šè¿”å›é”™è¯¯
  - éƒ¨åˆ†äº¤æ˜“ä¸å­˜åœ¨ï¼šè·³è¿‡ä¸å­˜åœ¨çš„ï¼Œç»§ç»­å¤„ç†å…¶ä»–

**TxPool.ConfirmTransactions**
- **ç”¨é€”**ï¼šåŒºå—ç¡®è®¤åç§»é™¤å·²æ‰“åŒ…çš„äº¤æ˜“
- **å‰ç½®æ¡ä»¶**ï¼š
  - äº¤æ˜“å¿…é¡»åœ¨Miningæˆ–PendingConfirmçŠ¶æ€
  - blockHeightæœ‰æ•ˆ
- **åç½®ä¿è¯**ï¼š
  - äº¤æ˜“çŠ¶æ€å˜ä¸ºConfirmed
  - äº¤æ˜“ä»æ± ä¸­ç§»é™¤
  - å‘å¸ƒTxConfirmedäº‹ä»¶
- **è¾¹ç•Œæƒ…å†µ**ï¼š
  - äº¤æ˜“ä¸å­˜åœ¨ï¼šå¿½ç•¥ï¼ˆå¯èƒ½å·²è¢«æ¸…ç†ï¼‰
  - çŠ¶æ€ä¸åŒ¹é…ï¼šè®°å½•è­¦å‘Šä½†ä¸æŠ¥é”™

**CandidatePool.AddCandidate**
- **ç”¨é€”**ï¼šæ·»åŠ å€™é€‰åŒºå—åˆ°æ± ä¸­
- **å‰ç½®æ¡ä»¶**ï¼š
  - å€™é€‰åŒºå—å¿…é¡»å·²é€šè¿‡åŸºç¡€PoWéªŒè¯
  - å€™é€‰åŒºå—é«˜åº¦ = å½“å‰é“¾é«˜åº¦ + 1
- **åç½®ä¿è¯**ï¼š
  - å€™é€‰åŒºå—è¿›å…¥æ± ä¸­
  - æŒ‰é«˜åº¦åˆ†ç»„å­˜å‚¨
  - å‘å¸ƒCandidateAddedäº‹ä»¶
- **è¾¹ç•Œæƒ…å†µ**ï¼š
  - å€™é€‰åŒºå—å·²å­˜åœ¨ï¼šè¿”å›ErrDuplicateCandidate
  - å€™é€‰åŒºå—é«˜åº¦ä¸åˆæ³•ï¼šè¿”å›ErrInvalidHeight
  - æ± å·²æ»¡ï¼šæ·˜æ±°æœ€æ—§çš„å€™é€‰åŒºå—

**CandidatePool.WaitForCandidates**
- **ç”¨é€”**ï¼šèšåˆèŠ‚ç‚¹ç­‰å¾…è¶³å¤Ÿçš„å€™é€‰åŒºå—
- **å‰ç½®æ¡ä»¶**ï¼š
  - minCount > 0
  - timeoutæœ‰æ•ˆ
- **åç½®ä¿è¯**ï¼š
  - è¿”å›è‡³å°‘minCountä¸ªå€™é€‰åŒºå—ï¼Œæˆ–è¶…æ—¶è¿”å›æ‰€æœ‰å½“å‰å€™é€‰åŒºå—
  - å€™é€‰åŒºå—æŒ‰æ¥æ”¶æ—¶é—´æ’åº
- **è¾¹ç•Œæƒ…å†µ**ï¼š
  - è¶…æ—¶å‰æœªè¾¾åˆ°minCountï¼šè¿”å›å½“å‰æ‰€æœ‰å€™é€‰åŒºå—
  - è¶…æ—¶æ—¶é—´ä¸º0ï¼šç«‹å³è¿”å›å½“å‰å€™é€‰åŒºå—

---

## ğŸ”„ **æ ¸å¿ƒæµç¨‹**

### **äº¤æ˜“æäº¤ä¸ç¡®è®¤æµç¨‹**

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·/API
    participant Submitter as TransactionSubmitter
    participant Validator as TxVerifier
    participant Pool as TxPool
    participant Miner as çŸ¿å·¥
    participant Block as BlockService
    
    User->>Submitter: æäº¤äº¤æ˜“
    Submitter->>Validator: éªŒè¯äº¤æ˜“
    activate Validator
    Validator->>Validator: ç­¾åéªŒè¯<br/>nonceæ£€æŸ¥<br/>ä½™é¢æ£€æŸ¥<br/>UTXOéªŒè¯
    Validator-->>Submitter: éªŒè¯é€šè¿‡
    deactivate Validator
    
    Submitter->>Pool: SubmitTx(tx)
    activate Pool
    Pool->>Pool: æ£€æŸ¥é‡å¤<br/>æ£€æŸ¥å†…å­˜é™åˆ¶
    Pool->>Pool: åŠ å…¥Pendingé˜Ÿåˆ—
    Pool-->>Submitter: è¿”å›txHash
    deactivate Pool
    
    Note over Pool,Miner: ç­‰å¾…çŸ¿å·¥é€‰æ‹©
    
    Miner->>Pool: GetTransactionsForMining()
    Pool-->>Miner: è¿”å›ä¼˜è´¨äº¤æ˜“åˆ—è¡¨
    
    Miner->>Pool: MarkTransactionsAsMining(txIDs)
    Note over Pool: çŠ¶æ€: Pending â†’ Mining
    
    Miner->>Miner: æ‰“åŒ…åŒºå—<br/>PoWæŒ–çŸ¿
    
    alt æŒ–çŸ¿æˆåŠŸ
        Miner->>Pool: MarkAsPendingConfirm(txIDs, blockHeight)
        Note over Pool: çŠ¶æ€: Mining â†’ PendingConfirm
        
        Miner->>Block: å¹¿æ’­åŒºå—
        Block->>Block: åŒºå—éªŒè¯<br/>ç½‘ç»œç¡®è®¤
        
        Block->>Pool: ConfirmTransactions(txIDs, blockHeight)
        Note over Pool: çŠ¶æ€: PendingConfirm â†’ Confirmed â†’ ç§»é™¤
    else æŒ–çŸ¿å¤±è´¥
        Miner->>Pool: RejectTransactions(txIDs)
        Note over Pool: çŠ¶æ€: Mining â†’ Pending<br/>é‡æ–°å¯é€‰
    end
```

### **å€™é€‰åŒºå—ç”Ÿå‘½å‘¨æœŸæµç¨‹**

```mermaid
sequenceDiagram
    participant Miner as çŸ¿å·¥èŠ‚ç‚¹
    participant Pool as CandidatePool
    participant Agg as èšåˆèŠ‚ç‚¹
    participant VRF as VRFé€‰æ‹©å™¨
    participant Chain as ChainService
    
    Note over Miner,Pool: å¤šä¸ªçŸ¿å·¥æŒ–çŸ¿
    
    Miner->>Pool: AddCandidate(block1, peer1)
    Pool->>Pool: æŒ‰é«˜åº¦åˆ†ç»„å­˜å‚¨
    
    Miner->>Pool: AddCandidate(block2, peer2)
    Miner->>Pool: AddCandidate(block3, peer3)
    
    Note over Pool: æ”¶é›†å€™é€‰åŒºå—
    
    Agg->>Pool: WaitForCandidates(minCount=3, timeout=10s)
    activate Pool
    
    alt åœ¨è¶…æ—¶å‰æ”¶é›†åˆ°è¶³å¤Ÿå€™é€‰åŒºå—
        Pool-->>Agg: è¿”å›3ä¸ªå€™é€‰åŒºå—
    else è¶…æ—¶
        Pool-->>Agg: è¿”å›å½“å‰æ‰€æœ‰å€™é€‰åŒºå—
    end
    deactivate Pool
    
    Agg->>VRF: æ‰§è¡ŒVRFéšæœºé€‰æ‹©
    activate VRF
    
    VRF->>Pool: GetCandidateHashes()
    Pool-->>VRF: è¿”å›æ‰€æœ‰å€™é€‰å“ˆå¸Œ
    
    VRF->>VRF: VRFè®¡ç®—<br/>é€‰æ‹©è·èƒœåŒºå—
    
    VRF->>Pool: GetCandidateByHash(winnerHash)
    Pool-->>VRF: è¿”å›è·èƒœå€™é€‰åŒºå—
    
    VRF-->>Agg: è¿”å›é€‰ä¸­åŒºå—
    deactivate VRF
    
    Agg->>Chain: åº”ç”¨é€‰ä¸­åŒºå—<br/>æ›´æ–°é“¾çŠ¶æ€
    
    Agg->>Pool: ClearCandidates()
    Note over Pool: æ¸…ç©ºæ‰€æœ‰å€™é€‰åŒºå—<br/>å‡†å¤‡ä¸‹ä¸€è½®
```

### **å…³é”®ç‚¹**

| é˜¶æ®µ | æ ¸å¿ƒé€»è¾‘ | ä¸ºä»€ä¹ˆè¿™æ ·åš | çº¦æŸæ¡ä»¶ |
|------|---------|------------|---------|
| **äº¤æ˜“æäº¤** | åªæ¥å—å·²éªŒè¯äº¤æ˜“ | ç¡®ä¿æ± ä¸­äº¤æ˜“éƒ½æ˜¯åˆæ³•çš„ | å¿…é¡»å…ˆè°ƒç”¨TxVerifier |
| **çŠ¶æ€è½¬æ¢** | ä¸¥æ ¼çš„çŠ¶æ€æœºç®¡ç† | é¿å…çŠ¶æ€æ··ä¹±ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ | çŠ¶æ€è½¬æ¢å¿…é¡»åˆæ³• |
| **çŸ¿å·¥é€‰æ‹©** | æŒ‰è´¹ç‡æ’åºè¿”å›äº¤æ˜“ | æœ€å¤§åŒ–çŸ¿å·¥æ”¶ç›Š | åªè¿”å›PendingçŠ¶æ€äº¤æ˜“ |
| **å€™é€‰åŒºå—æ”¶é›†** | æŒ‰é«˜åº¦åˆ†ç»„ç®¡ç† | æ–¹ä¾¿VRFé€‰æ‹©æŒ‡å®šé«˜åº¦çš„å€™é€‰åŒºå— | é«˜åº¦å¿…é¡» = å½“å‰é«˜åº¦+1 |
| **è¶…æ—¶æ¸…ç†** | å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ® | é˜²æ­¢å†…å­˜æ³„æ¼ | æ¸…ç†é—´éš”ç”±é…ç½®å†³å®š |

---

## ğŸ“ **ä½¿ç”¨æŒ‡å—**

### **å…¸å‹åœºæ™¯**

**åœºæ™¯1ï¼šç”¨æˆ·æäº¤äº¤æ˜“**

```mermaid
graph LR
    A[ç”¨æˆ·æäº¤] --> B[TransactionSubmitteréªŒè¯]
    B --> C[TxPool.SubmitTx]
    C --> D[è¿›å…¥Pendingé˜Ÿåˆ—]
    D --> E[ç­‰å¾…çŸ¿å·¥æ‰“åŒ…]
```

**å…³é”®ç‚¹**ï¼š
- è¾“å…¥è¦æ»¡è¶³ï¼šäº¤æ˜“å·²é€šè¿‡å®Œæ•´éªŒè¯
- è¾“å‡ºä¿è¯ï¼šè¿”å›txHashï¼Œå¯ç”¨äºè¿½è¸ªçŠ¶æ€
- æ³¨æ„äº‹é¡¹ï¼šä¸è¦ç»•è¿‡TransactionSubmitterç›´æ¥è°ƒç”¨SubmitTx

**åœºæ™¯2ï¼šçŸ¿å·¥æ‰“åŒ…äº¤æ˜“**

```mermaid
graph LR
    A[çŸ¿å·¥å¼€å§‹æŒ–çŸ¿] --> B[GetTransactionsForMining]
    B --> C[è·å–ä¼˜è´¨äº¤æ˜“]
    C --> D[MarkTransactionsAsMining]
    D --> E[æ‰“åŒ…åŒºå—]
    E --> F[PoWæŒ–çŸ¿]
```

**å…³é”®ç‚¹**ï¼š
- è¾“å…¥è¦æ»¡è¶³ï¼šæ± ä¸­æœ‰pendingäº¤æ˜“
- è¾“å‡ºä¿è¯ï¼šè¿”å›æŒ‰è´¹ç‡æ’åºçš„äº¤æ˜“ï¼Œæ•°é‡ç”±é…ç½®å†³å®š
- æ³¨æ„äº‹é¡¹ï¼šå¿…é¡»è°ƒç”¨MarkTransactionsAsMiningé¿å…é‡å¤é€‰æ‹©

**åœºæ™¯3ï¼šèšåˆèŠ‚ç‚¹æ”¶é›†å€™é€‰åŒºå—**

```mermaid
graph LR
    A[ç¡®å®šä¸ºèšåˆèŠ‚ç‚¹] --> B[WaitForCandidates]
    B --> C[ç­‰å¾…è¶³å¤Ÿå€™é€‰åŒºå—]
    C --> D[VRFéšæœºé€‰æ‹©]
    D --> E[ClearCandidates]
```

**å…³é”®ç‚¹**ï¼š
- è¾“å…¥è¦æ»¡è¶³ï¼šminCountå’Œtimeoutåˆç†
- è¾“å‡ºä¿è¯ï¼šè¿”å›è‡³å°‘minCountä¸ªå€™é€‰åŒºå—ï¼ˆæˆ–è¶…æ—¶è¿”å›å…¨éƒ¨ï¼‰
- æ³¨æ„äº‹é¡¹ï¼šé€‰æ‹©å®Œæˆåå¿…é¡»ClearCandidates

### **å¸¸è§è¯¯ç”¨**

| è¯¯ç”¨æ–¹å¼ | ä¸ºä»€ä¹ˆé”™è¯¯ | æ­£ç¡®åšæ³• |
|---------|-----------|---------|
| **ç»•è¿‡éªŒè¯ç›´æ¥å…¥æ± ** | æ± ä¸­å¯èƒ½å­˜åœ¨éæ³•äº¤æ˜“ | å¿…é¡»å…ˆè°ƒç”¨TxVerifieréªŒè¯ |
| **ä¸è°ƒç”¨MarkTransactionsAsMining** | åŒä¸€äº¤æ˜“å¯èƒ½è¢«å¤šä¸ªçŸ¿å·¥æ‰“åŒ… | é€‰æ‹©äº¤æ˜“åç«‹å³æ ‡è®°ä¸ºMining |
| **å¿˜è®°ConfirmTransactions** | äº¤æ˜“æ°¸è¿œç•™åœ¨æ± ä¸­ï¼Œå†…å­˜æ³„æ¼ | åŒºå—ç¡®è®¤åç«‹å³è°ƒç”¨ |
| **é¢‘ç¹è°ƒç”¨GetAllPendingTransactions** | æ€§èƒ½å¼€é”€å¤§ï¼Œè¿”å›å¤§é‡æ•°æ® | åªåœ¨å¿…è¦æ—¶è°ƒç”¨ï¼Œå¦‚ä½™é¢è®¡ç®— |
| **å€™é€‰åŒºå—é«˜åº¦ä¸åŒ¹é…** | å€™é€‰åŒºå—æ— æ³•å‚ä¸å…±è¯† | åªæäº¤é«˜åº¦=å½“å‰+1çš„å€™é€‰åŒºå— |

---

## âš ï¸ **å·²çŸ¥é™åˆ¶**

| é™åˆ¶ | å½±å“ | è§„é¿æ–¹æ³• | æœªæ¥è®¡åˆ’ |
|------|------|---------|---------|
| **å†…å­˜é™åˆ¶å›ºå®š** | æ± æ»¡æ—¶æ‹’ç»æ–°äº¤æ˜“æˆ–æ·˜æ±°ä½ä¼˜å…ˆçº§äº¤æ˜“ | åˆç†é…ç½®å†…å­˜é™åˆ¶ | å®ç°åŠ¨æ€å†…å­˜è°ƒæ•´ |
| **ä¼˜å…ˆçº§æ’åºç®€å•** | åªæŒ‰è´¹ç‡æ’åºï¼Œä¸è€ƒè™‘å…¶ä»–å› ç´  | ä½¿ç”¨è¶³å¤Ÿé«˜çš„è´¹ç‡ | å¼•å…¥å¤šç»´åº¦ä¼˜å…ˆçº§ç®—æ³• |
| **æ— è·¨æ± åè°ƒ** | äº¤æ˜“æ± å’Œå€™é€‰åŒºå—æ± ç‹¬ç«‹ï¼Œæ— æ³•åè°ƒå†…å­˜ä½¿ç”¨ | åˆ†åˆ«é…ç½®å†…å­˜é™åˆ¶ | å®ç°å…¨å±€å†…å­˜ç®¡ç†å™¨ |
| **çŠ¶æ€è½¬æ¢ä¸²è¡Œ** | å¤§é‡äº¤æ˜“çŠ¶æ€æ›´æ–°æ—¶å¯èƒ½æˆä¸ºç“¶é¢ˆ | æ‰¹é‡æ“ä½œï¼Œå‡å°‘æ›´æ–°é¢‘ç‡ | å¼•å…¥æ‰¹é‡çŠ¶æ€æ›´æ–°æ¥å£ |
| **å€™é€‰åŒºå—æ— ä¼˜å…ˆçº§** | å€™é€‰åŒºå—æŒ‰æ¥æ”¶é¡ºåºï¼Œæ— è´¨é‡æ’åº | VRFéšæœºé€‰æ‹©ï¼Œä¸ä¾èµ–è´¨é‡ | è€ƒè™‘å¼•å…¥å€™é€‰åŒºå—è´¨é‡è¯„åˆ† |

---

## ğŸ” **è®¾è®¡æƒè¡¡è®°å½•**

### **æƒè¡¡1ï¼šæ˜¯å¦æš´éœ²ç›‘æ§ç»Ÿè®¡æ¥å£ï¼Ÿ**

**èƒŒæ™¯**ï¼šä¼ ç»Ÿè®¾è®¡ä¼šæä¾›GetStats/GetPoolStatusç­‰ç›‘æ§æ¥å£

**å¤‡é€‰æ–¹æ¡ˆ**ï¼š
1. **æ–¹æ¡ˆAï¼ˆæš´éœ²ç›‘æ§æ¥å£ï¼‰**ï¼šæä¾›GetStats/GetPoolStatus/GetDetailedStats
   - ä¼˜åŠ¿ï¼šå¤–éƒ¨å¯ä»¥ç›‘æ§æ± çš„è¿è¡ŒçŠ¶æ€
   - åŠ£åŠ¿ï¼šè°æ˜¯ç›‘æ§çš„æ¶ˆè´¹è€…ï¼Ÿçœ‹äº†æ•°æ®èƒ½åšä»€ä¹ˆï¼Ÿ
2. **æ–¹æ¡ˆBï¼ˆä¸æš´éœ²ç›‘æ§æ¥å£ï¼‰**ï¼šå®Œå…¨ä¸æä¾›ç»Ÿè®¡æ¥å£
   - ä¼˜åŠ¿ï¼šç®€åŒ–æ¥å£ï¼Œé¿å…æ— æ„ä¹‰çš„æ•°æ®æš´éœ²
   - åŠ£åŠ¿ï¼šæ— æ³•å®æ—¶äº†è§£æ± çš„è¿è¡ŒçŠ¶æ€

**é€‰æ‹©**ï¼šé€‰æ‹©äº†æ–¹æ¡ˆBï¼ˆä¸æš´éœ²ç›‘æ§æ¥å£ï¼‰

**ç†ç”±**ï¼š
- WESæ˜¯è‡ªè¿è¡ŒåŒºå—é“¾ç³»ç»Ÿï¼Œæ²¡æœ‰å¤–éƒ¨ç›‘æ§ç³»ç»Ÿ
- æ± çš„å¼‚å¸¸ç”±å†…éƒ¨è‡ªåŠ¨å¤„ç†ï¼Œä¸éœ€è¦å¤–éƒ¨å¹²é¢„
- ç»Ÿè®¡æ•°æ®çš„æ¶ˆè´¹è€…ä¸å­˜åœ¨ï¼Œæš´éœ²è¿™äº›æ¥å£æ¯«æ— æ„ä¹‰

**ä»£ä»·**ï¼š
- æ— æ³•é€šè¿‡æ¥å£æŸ¥è¯¢æ± çš„è¿è¡ŒçŠ¶æ€
- è°ƒè¯•æ—¶éœ€è¦é€šè¿‡æ—¥å¿—æˆ–å†…éƒ¨å·¥å…·

### **æƒè¡¡2ï¼šäº¤æ˜“æ± å’Œå€™é€‰åŒºå—æ± æ˜¯å¦åˆå¹¶ï¼Ÿ**

**èƒŒæ™¯**ï¼šäº¤æ˜“å’Œå€™é€‰åŒºå—éƒ½æ˜¯ä¸´æ—¶æ•°æ®ï¼Œæ˜¯å¦åº”è¯¥ç”¨ä¸€ä¸ªæ± ç®¡ç†

**å¤‡é€‰æ–¹æ¡ˆ**ï¼š
1. **æ–¹æ¡ˆAï¼ˆåˆå¹¶ä¸ºä¸€ä¸ªæ± ï¼‰**ï¼šç»Ÿä¸€çš„Mempoolç®¡ç†äº¤æ˜“å’Œå€™é€‰åŒºå—
   - ä¼˜åŠ¿ï¼šæ¥å£ç»Ÿä¸€ï¼Œå†…å­˜ç®¡ç†æ›´çµæ´»
   - åŠ£åŠ¿ï¼šèŒè´£æ··ä¹±ï¼Œäº¤æ˜“å’ŒåŒºå—çš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨ä¸åŒ
2. **æ–¹æ¡ˆBï¼ˆåˆ†ç¦»ä¸ºä¸¤ä¸ªæ± ï¼‰**ï¼šTxPoolå’ŒCandidatePoolç‹¬ç«‹
   - ä¼˜åŠ¿ï¼šèŒè´£æ¸…æ™°ï¼Œç”Ÿå‘½å‘¨æœŸç®¡ç†ç‹¬ç«‹
   - åŠ£åŠ¿ï¼šä¸¤ä¸ªæ± çš„å†…å­˜é™åˆ¶éœ€è¦åˆ†åˆ«é…ç½®

**é€‰æ‹©**ï¼šé€‰æ‹©äº†æ–¹æ¡ˆBï¼ˆåˆ†ç¦»ä¸ºä¸¤ä¸ªæ± ï¼‰

**ç†ç”±**ï¼š
- äº¤æ˜“å’Œå€™é€‰åŒºå—çš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨ä¸åŒ
- äº¤æ˜“éœ€è¦å¤æ‚çš„çŠ¶æ€æœºç®¡ç†ï¼Œå€™é€‰åŒºå—åªéœ€ç®€å•çš„è¶…æ—¶æ¸…ç†
- åˆ†ç¦»åå¹¶å‘æ€§èƒ½æ›´å¥½ï¼Œäº’ä¸å¹²æ‰°

**ä»£ä»·**ï¼š
- æ¥å£æ•°é‡å¢åŠ ï¼ˆ2ä¸ªæ¥å£ vs 1ä¸ªæ¥å£ï¼‰
- å†…å­˜ç®¡ç†éœ€è¦åˆ†åˆ«é…ç½®

### **æƒè¡¡3ï¼šäº¤æ˜“çŠ¶æ€è½¬æ¢æ˜¯å¦éœ€è¦äº‹åŠ¡æ”¯æŒï¼Ÿ**

**èƒŒæ™¯**ï¼šäº¤æ˜“çŠ¶æ€è½¬æ¢å¯èƒ½æ¶‰åŠå¤šä¸ªæ“ä½œï¼Œæ˜¯å¦éœ€è¦äº‹åŠ¡ä¿è¯

**å¤‡é€‰æ–¹æ¡ˆ**ï¼š
1. **æ–¹æ¡ˆAï¼ˆæ”¯æŒäº‹åŠ¡ï¼‰**ï¼šæä¾›BeginTransaction/Commit/Rollbackæ¥å£
   - ä¼˜åŠ¿ï¼šä¿è¯å¤šä¸ªæ“ä½œçš„åŸå­æ€§
   - åŠ£åŠ¿ï¼šå¢åŠ æ¥å£å¤æ‚åº¦ï¼Œå®ç°æˆæœ¬é«˜
2. **æ–¹æ¡ˆBï¼ˆå•ä¸ªæ“ä½œåŸå­ï¼‰**ï¼šæ¯ä¸ªæ–¹æ³•å†…éƒ¨ä¿è¯åŸå­æ€§
   - ä¼˜åŠ¿ï¼šæ¥å£ç®€å•ï¼Œå®ç°å®¹æ˜“
   - åŠ£åŠ¿ï¼šæ— æ³•ä¿è¯è·¨æ–¹æ³•è°ƒç”¨çš„åŸå­æ€§
3. **æ–¹æ¡ˆCï¼ˆæ‰¹é‡æ“ä½œæ¥å£ï¼‰**ï¼šæä¾›BatchUpdateStatusç­‰æ‰¹é‡æ¥å£
   - ä¼˜åŠ¿ï¼šæ€§èƒ½å¥½ï¼Œæ¥å£é€‚ä¸­
   - åŠ£åŠ¿ï¼šæ‰¹é‡æ“ä½œçš„è¯­ä¹‰éœ€è¦æ¸…æ™°å®šä¹‰

**é€‰æ‹©**ï¼šé€‰æ‹©äº†æ–¹æ¡ˆBï¼ˆå•ä¸ªæ“ä½œåŸå­ï¼‰+ éƒ¨åˆ†æ–¹æ¡ˆCï¼ˆæ‰¹é‡æ¥å£ï¼‰

**ç†ç”±**ï¼š
- å¤§éƒ¨åˆ†åœºæ™¯ä¸‹å•ä¸ªæ“ä½œåŸå­æ€§å·²è¶³å¤Ÿ
- å¯¹äºéœ€è¦æ‰¹é‡æ›´æ–°çš„åœºæ™¯ï¼ˆå¦‚ConfirmTransactionsï¼‰ï¼Œæä¾›ä¸“é—¨çš„æ‰¹é‡æ¥å£
- é¿å…å¼•å…¥å¤æ‚çš„äº‹åŠ¡æœºåˆ¶

**ä»£ä»·**ï¼š
- æ— æ³•ä¿è¯è·¨æ–¹æ³•è°ƒç”¨çš„åŸå­æ€§
- è°ƒç”¨è€…éœ€è¦è‡ªå·±å¤„ç†éƒ¨åˆ†å¤±è´¥çš„æƒ…å†µ

---

## ğŸ“š **ç›¸å…³æ–‡æ¡£**

- **æ¶æ„è®¾è®¡**ï¼š
  - `_docs/architecture/COMPONENT_ARCHITECTURE_SPECIFICATION.md` - ç»„ä»¶æ¶æ„è§„èŒƒ
  - `pkg/interfaces/README.md` - WESæ¥å£å…¨å±€æ¶æ„
  
- **æ¥å£è§„èŒƒ**ï¼š
  - `pkg/interfaces/mempool/txpool.go` - TxPoolæ¥å£å®šä¹‰
  - `pkg/interfaces/mempool/candidatepool.go` - CandidatePoolæ¥å£å®šä¹‰
  
- **å®ç°ç»„ä»¶**ï¼š
  - `internal/core/mempool/txpool/` - äº¤æ˜“æ± å®ç°
  - `internal/core/mempool/candidatepool/` - å€™é€‰åŒºå—æ± å®ç°

---

## ğŸ“‹ **æ–‡æ¡£å˜æ›´è®°å½•**

| æ—¥æœŸ | å˜æ›´å†…å®¹ | åŸå›  |
|------|---------|------|
| 2025-10-22 | æŒ‰ç…§æ–°æ¨¡æ¿é‡æ„æ•´ä¸ªREADME | ç»Ÿä¸€æ¥å£æ–‡æ¡£è§„èŒƒï¼Œå¼ºåŒ–æ¶æ„å›¾å’Œè®¾è®¡æƒè¡¡è¯´æ˜ |
| 2024-XX-XX | åˆ é™¤GetStats/GetPoolStatusç­‰ç›‘æ§æ¥å£ | è‡ªè¿è¡Œç³»ç»Ÿä¸éœ€è¦å¤–éƒ¨ç›‘æ§ |
| 2024-XX-XX | ä»UTXOè§£è€¦ï¼Œåˆ é™¤UTXOç›¸å…³æ–¹æ³• | èŒè´£åˆ†ç¦»ï¼ŒéªŒè¯ä¸å­˜å‚¨åˆ†ç¦» |

---

> ğŸ“ **è´¨é‡æ£€æŸ¥æ¸…å•**ï¼š
> - [âœ“] ä½¿ç”¨æ¶æ„å›¾å’Œæµç¨‹å›¾ä»£æ›¿å¤§é‡æ–‡å­—æè¿°
> - [âœ“] æ˜ç¡®äº†æ ¸å¿ƒçº¦æŸå’Œç¦æ­¢é¡¹ï¼ˆåªå­˜å‚¨å·²éªŒè¯æ•°æ®ã€ä¸è¿›è¡ŒéªŒè¯ã€ä¸æš´éœ²ç›‘æ§ï¼‰
> - [âœ“] è®°å½•äº†3ä¸ªå…³é”®è®¾è®¡æƒè¡¡ï¼ˆç›‘æ§æ¥å£ã€åŒæ± åˆ†ç¦»ã€äº‹åŠ¡æ”¯æŒï¼‰
> - [âœ“] è¯šå®æè¿°äº†5ä¸ªå·²çŸ¥é™åˆ¶åŠè§„é¿æ–¹æ³•
> - [âœ“] åˆ é™¤äº†è™šå‡çš„æ€§èƒ½æ•°æ®
> - [âœ“] æ¯ä¸ªç« èŠ‚éƒ½æœ‰çœŸå®ä»·å€¼ï¼Œæ— å¥—è¯
