# é›†æˆå±‚ï¼ˆinternal/core/mempool/integrationï¼‰

ã€æ¨¡å—å®šä½ã€‘
ã€€ã€€æœ¬ç›®å½•å®ç°å†…å­˜æ± çš„é›†æˆå±‚ï¼Œè´Ÿè´£å†…å­˜æ± ä¸å¤–éƒ¨ç³»ç»Ÿçš„é›†æˆå’Œé€šä¿¡ã€‚é›†æˆå±‚é€šè¿‡äº‹ä»¶é©±åŠ¨æ¶æ„å®ç°ä¸å…¶ä»–æ¨¡å—çš„æ¾è€¦åˆé›†æˆï¼Œç¡®ä¿å†…å­˜æ± èƒ½å¤Ÿé«˜æ•ˆåœ°ä¸ç½‘ç»œå±‚ã€åŒºå—é“¾æ ¸å¿ƒã€å…±è¯†ç®—æ³•ç­‰ç³»ç»Ÿç»„ä»¶ååŒå·¥ä½œã€‚

ã€è®¾è®¡åŸåˆ™ã€‘
- äº‹ä»¶é©±åŠ¨æ¶æ„ï¼šåŸºäºäº‹ä»¶æ€»çº¿çš„å¼‚æ­¥é€šä¿¡æ¨¡å¼
- æ¾è€¦åˆé›†æˆï¼šæœ€å°åŒ–ä¸å¤–éƒ¨ç³»ç»Ÿçš„ç›´æ¥ä¾èµ–
- åŒå‘é€šä¿¡æ”¯æŒï¼šå…¥ç«™äº‹ä»¶è®¢é˜…å’Œå‡ºç«™äº‹ä»¶å‘å¸ƒçš„ç»Ÿä¸€ç®¡ç†
- å¯æ‰©å±•æ¥å£ï¼šæ”¯æŒæ–°çš„é›†æˆéœ€æ±‚å’Œé€šä¿¡æ¨¡å¼
- é”™è¯¯éš”ç¦»æœºåˆ¶ï¼šé›†æˆé”™è¯¯ä¸å½±å“å†…å­˜æ± æ ¸å¿ƒåŠŸèƒ½
- æ€§èƒ½ä¼˜åŒ–è®¾è®¡ï¼šé«˜æ•ˆçš„äº‹ä»¶å¤„ç†å’Œæ¶ˆæ¯ä¼ é€’

ã€æ ¸å¿ƒèŒè´£ã€‘
1. **äº‹ä»¶é›†æˆç®¡ç†**ï¼šç»Ÿä¸€ç®¡ç†å†…å­˜æ± çš„äº‹ä»¶é›†æˆå’Œé€šä¿¡
2. **å…¥ç«™äº‹ä»¶å¤„ç†**ï¼šè®¢é˜…å’Œå¤„ç†æ¥è‡ªå¤–éƒ¨ç³»ç»Ÿçš„äº‹ä»¶
3. **å‡ºç«™äº‹ä»¶å‘å¸ƒ**ï¼šå‘å¸ƒå†…å­˜æ± å†…éƒ¨çŠ¶æ€å˜æ›´äº‹ä»¶
4. **é€šä¿¡åè°ƒæœåŠ¡**ï¼šåè°ƒä¸åŒç±»å‹çš„é›†æˆé€šä¿¡
5. **é”™è¯¯å¤„ç†æœºåˆ¶**ï¼šé›†æˆè¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†å’Œæ¢å¤
6. **æ€§èƒ½ç›‘æ§ä¼˜åŒ–**ï¼šé›†æˆæ€§èƒ½çš„ç›‘æ§å’Œä¼˜åŒ–

ã€é›†æˆå±‚è®¾è®¡ç†å¿µï¼šäº‹ä»¶é©±åŠ¨é€šä¿¡æ¨¡å¼ã€‘
æœ¬é›†æˆå±‚é‡‡ç”¨"äº‹ä»¶é©±åŠ¨é€šä¿¡"è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡æ ‡å‡†åŒ–çš„äº‹ä»¶æ¥å£å®ç°å†…å­˜æ± ä¸å¤–éƒ¨ç³»ç»Ÿçš„è§£è€¦é›†æˆã€‚è¿™ç§è®¾è®¡çš„æ ¸å¿ƒæ€æƒ³æ˜¯"äº‹ä»¶è¿æ¥ï¼ŒæœåŠ¡è§£è€¦"ã€‚

## é›†æˆæ¶æ„è®¾è®¡

```mermaid
graph TB
    subgraph "Integration Layer Architecture"
        INTEGRATION_SERVICE["Integration Service<br/>é›†æˆæœåŠ¡"]
        
        subgraph "Event Management"
            EVENT_COORDINATOR["Event Coordinator<br/>äº‹ä»¶åè°ƒå™¨"]
            EVENT_ROUTER["Event Router<br/>äº‹ä»¶è·¯ç”±å™¨"]
            EVENT_TRANSFORMER["Event Transformer<br/>äº‹ä»¶è½¬æ¢å™¨"]
        end
        
        subgraph "Communication Channels"
            INCOMING_CHANNEL["Incoming Channel<br/>å…¥ç«™é€šé“"]
            OUTGOING_CHANNEL["Outgoing Channel<br/>å‡ºç«™é€šé“"]
            BIDIRECTIONAL_CHANNEL["Bidirectional Channel<br/>åŒå‘é€šé“"]
        end
        
        subgraph "Event Processing"
            INCOMING_PROCESSOR["Incoming Processor<br/>å…¥ç«™å¤„ç†å™¨"]
            OUTGOING_PUBLISHER["Outgoing Publisher<br/>å‡ºç«™å‘å¸ƒå™¨"]
            EVENT_FILTER["Event Filter<br/>äº‹ä»¶è¿‡æ»¤å™¨"]
        end
        
        subgraph "External Systems"
            NETWORK_LAYER["Network Layer<br/>ç½‘ç»œå±‚"]
            BLOCKCHAIN_CORE["Blockchain Core<br/>åŒºå—é“¾æ ¸å¿ƒ"]
            CONSENSUS_ENGINE["Consensus Engine<br/>å…±è¯†å¼•æ“"]
            EVENT_BUS["Event Bus<br/>äº‹ä»¶æ€»çº¿"]
        end
    end
    
    INTEGRATION_SERVICE --> EVENT_COORDINATOR
    INTEGRATION_SERVICE --> EVENT_ROUTER
    
    EVENT_COORDINATOR --> EVENT_TRANSFORMER
    EVENT_ROUTER --> INCOMING_CHANNEL
    EVENT_TRANSFORMER --> OUTGOING_CHANNEL
    
    INCOMING_CHANNEL --> INCOMING_PROCESSOR
    OUTGOING_CHANNEL --> OUTGOING_PUBLISHER
    BIDIRECTIONAL_CHANNEL --> EVENT_FILTER
    
    INCOMING_PROCESSOR --> NETWORK_LAYER
    OUTGOING_PUBLISHER --> BLOCKCHAIN_CORE
    EVENT_FILTER --> CONSENSUS_ENGINE
    
    EVENT_BUS --> EVENT_COORDINATOR
    NETWORK_LAYER --> INCOMING_CHANNEL
    BLOCKCHAIN_CORE --> OUTGOING_CHANNEL
    CONSENSUS_ENGINE --> BIDIRECTIONAL_CHANNEL
    
    style INTEGRATION_SERVICE fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    style EVENT_COORDINATOR fill:#f3e5f5,stroke:#4a148c
    style INCOMING_PROCESSOR fill:#e8f5e8,stroke:#2e7d32
```

## ç›®å½•ç»“æ„ä¸åŠŸèƒ½

| ç›®å½• | æ ¸å¿ƒåŠŸèƒ½ | ä¸»è¦èŒè´£ |
|------|----------|----------|
| **event/** | `EventIntegration` | äº‹ä»¶é›†æˆçš„æ ¸å¿ƒå®ç°å’Œç®¡ç† |
| **event/incoming/** | `IncomingEvents` | å…¥ç«™äº‹ä»¶çš„è®¢é˜…å’Œå¤„ç† |
| **event/outgoing/** | `OutgoingEvents` | å‡ºç«™äº‹ä»¶çš„å‘å¸ƒå’Œåˆ†å‘ |

## æ ¸å¿ƒé›†æˆåŠŸèƒ½

### ğŸ”„ äº‹ä»¶é©±åŠ¨é›†æˆæ¶æ„
ã€€ã€€é›†æˆå±‚çš„æ ¸å¿ƒæ˜¯äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œé€šè¿‡æ ‡å‡†åŒ–çš„äº‹ä»¶æ¥å£å®ç°å†…å­˜æ± ä¸å¤–éƒ¨ç³»ç»Ÿçš„æ¾è€¦åˆé›†æˆã€‚äº‹ä»¶åè°ƒå™¨è´Ÿè´£ç®¡ç†æ‰€æœ‰çš„äº‹ä»¶æµï¼Œç¡®ä¿äº‹ä»¶çš„æ­£ç¡®è·¯ç”±å’Œå¤„ç†ã€‚

ã€€ã€€äº‹ä»¶è·¯ç”±å™¨æ ¹æ®äº‹ä»¶ç±»å‹å’Œç›®æ ‡ç³»ç»Ÿè¿›è¡Œæ™ºèƒ½è·¯ç”±ï¼Œæ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ç­‰å¤šç§è·¯ç”±æ¨¡å¼ã€‚äº‹ä»¶è½¬æ¢å™¨è´Ÿè´£åœ¨ä¸åŒç³»ç»Ÿé—´è¿›è¡Œäº‹ä»¶æ ¼å¼è½¬æ¢ï¼Œç¡®ä¿äº‹ä»¶çš„å…¼å®¹æ€§å’Œä¸€è‡´æ€§ã€‚

ã€€ã€€é›†æˆæ¶æ„æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§äº‹ä»¶å¤„ç†æ¨¡å¼ã€‚åŒæ­¥æ¨¡å¼ç”¨äºéœ€è¦ç«‹å³å“åº”çš„å…³é”®äº‹ä»¶ï¼Œå¼‚æ­¥æ¨¡å¼ç”¨äºå¤§éƒ¨åˆ†çŠ¶æ€é€šçŸ¥äº‹ä»¶ï¼Œæé«˜ç³»ç»Ÿæ•´ä½“æ€§èƒ½ã€‚

### ğŸ“¥ å…¥ç«™äº‹ä»¶å¤„ç†æœºåˆ¶
ã€€ã€€å…¥ç«™äº‹ä»¶å¤„ç†è´Ÿè´£æ¥æ”¶å’Œå¤„ç†æ¥è‡ªå¤–éƒ¨ç³»ç»Ÿçš„äº‹ä»¶ã€‚ä¸»è¦åŒ…æ‹¬æ¥è‡ªç½‘ç»œå±‚çš„æ–°äº¤æ˜“äº‹ä»¶ã€æ¥è‡ªåŒºå—é“¾æ ¸å¿ƒçš„åŒºå—ç¡®è®¤äº‹ä»¶ã€æ¥è‡ªå…±è¯†å¼•æ“çš„çŠ¶æ€å˜æ›´äº‹ä»¶ç­‰ã€‚

ã€€ã€€å…¥ç«™å¤„ç†å™¨é‡‡ç”¨å¤šçº¿ç¨‹å¼‚æ­¥å¤„ç†æ¨¡å¼ï¼Œé¿å…å¤–éƒ¨äº‹ä»¶é˜»å¡å†…å­˜æ± çš„æ ¸å¿ƒæ“ä½œã€‚äº‹ä»¶é˜Ÿåˆ—æä¾›ç¼“å†²æœºåˆ¶ï¼Œåœ¨é«˜å¹¶å‘æƒ…å†µä¸‹å¹³æ»‘å¤„ç†äº‹ä»¶å³°å€¼ã€‚äº‹ä»¶å»é‡æœºåˆ¶é˜²æ­¢é‡å¤äº‹ä»¶çš„å¤šæ¬¡å¤„ç†ã€‚

ã€€ã€€é”™è¯¯å¤„ç†æœºåˆ¶ç¡®ä¿å•ä¸ªäº‹ä»¶çš„å¤„ç†å¤±è´¥ä¸ä¼šå½±å“å…¶ä»–äº‹ä»¶çš„å¤„ç†ã€‚é‡è¯•æœºåˆ¶å¯¹æš‚æ—¶æ€§é”™è¯¯è¿›è¡Œè‡ªåŠ¨é‡è¯•ï¼ŒæŒä¹…åŒ–æœºåˆ¶ç¡®ä¿é‡è¦äº‹ä»¶ä¸ä¼šå› ç³»ç»Ÿé‡å¯è€Œä¸¢å¤±ã€‚

### ğŸ“¤ å‡ºç«™äº‹ä»¶å‘å¸ƒæœåŠ¡
ã€€ã€€å‡ºç«™äº‹ä»¶å‘å¸ƒè´Ÿè´£å°†å†…å­˜æ± çš„å†…éƒ¨çŠ¶æ€å˜æ›´å‘å¸ƒç»™å¤–éƒ¨ç³»ç»Ÿã€‚ä¸»è¦åŒ…æ‹¬äº¤æ˜“çŠ¶æ€å˜æ›´äº‹ä»¶ã€å€™é€‰åŒºå—çŠ¶æ€äº‹ä»¶ã€å†…å­˜æ± å®¹é‡å˜æ›´äº‹ä»¶ã€æ€§èƒ½æŒ‡æ ‡äº‹ä»¶ç­‰ã€‚

ã€€ã€€å‘å¸ƒæœåŠ¡é‡‡ç”¨å¼‚æ­¥å‘å¸ƒæ¨¡å¼ï¼Œé¿å…äº‹ä»¶å‘å¸ƒå½±å“å†…å­˜æ± çš„ä¸»è¦æ“ä½œæ€§èƒ½ã€‚äº‹ä»¶èšåˆæœºåˆ¶å°†ç›¸å…³çš„å°äº‹ä»¶åˆå¹¶ä¸ºå¤§äº‹ä»¶ï¼Œå‡å°‘äº‹ä»¶æ€»é‡ã€‚äº‹ä»¶ä¼˜å…ˆçº§æœºåˆ¶ç¡®ä¿é‡è¦äº‹ä»¶èƒ½å¤Ÿä¼˜å…ˆå‘å¸ƒã€‚

ã€€ã€€è®¢é˜…è€…ç®¡ç†ç»´æŠ¤äº‹ä»¶è®¢é˜…è€…åˆ—è¡¨ï¼Œæ”¯æŒåŠ¨æ€è®¢é˜…å’Œå–æ¶ˆè®¢é˜…ã€‚äº‹ä»¶æŒä¹…åŒ–ç¡®ä¿é‡è¦äº‹ä»¶åœ¨è®¢é˜…è€…æš‚æ—¶ä¸å¯ç”¨æ—¶èƒ½å¤Ÿé‡æ–°å‘é€ã€‚

## é€šä¿¡åè°ƒæœºåˆ¶

### åŒå‘é€šä¿¡æ”¯æŒ
ã€€ã€€é›†æˆå±‚æ”¯æŒä¸å¤–éƒ¨ç³»ç»Ÿçš„åŒå‘é€šä¿¡ï¼Œæ—¢èƒ½æ¥æ”¶å¤–éƒ¨äº‹ä»¶ï¼Œä¹Ÿèƒ½å‘å¸ƒå†…éƒ¨äº‹ä»¶ã€‚åŒå‘é€šé“æä¾›ç»Ÿä¸€çš„é€šä¿¡æ¥å£ï¼Œç®€åŒ–å¤–éƒ¨ç³»ç»Ÿçš„é›†æˆå·¥ä½œã€‚

ã€€ã€€é€šä¿¡åè°ƒå™¨è´Ÿè´£ç®¡ç†å¤šä¸ªé€šä¿¡é€šé“ï¼Œç¡®ä¿ä¸åŒé€šé“é—´çš„åè°ƒå’Œä¸€è‡´æ€§ã€‚æ¶ˆæ¯å…³è”æœºåˆ¶æ”¯æŒè¯·æ±‚-å“åº”æ¨¡å¼çš„é€šä¿¡ï¼Œè‡ªåŠ¨å…³è”è¯·æ±‚å’Œå“åº”æ¶ˆæ¯ã€‚

ã€€ã€€æµé‡æ§åˆ¶æœºåˆ¶é˜²æ­¢é€šä¿¡è¿‡è½½ï¼Œé€šè¿‡èƒŒå‹æœºåˆ¶åœ¨ä¸‹æ¸¸å¤„ç†èƒ½åŠ›ä¸è¶³æ—¶ä¸»åŠ¨é™ä½äº‹ä»¶å‘å¸ƒé¢‘ç‡ã€‚è´Ÿè½½å‡è¡¡æœºåˆ¶åœ¨æœ‰å¤šä¸ªå¯ç”¨é€šé“æ—¶æ™ºèƒ½åˆ†é…é€šä¿¡è´Ÿè½½ã€‚

### é”™è¯¯éš”ç¦»ä¸æ¢å¤
ã€€ã€€é›†æˆå±‚å®ç°äº†å®Œæ•´çš„é”™è¯¯éš”ç¦»æœºåˆ¶ï¼Œç¡®ä¿é›†æˆé”™è¯¯ä¸ä¼šå½±å“å†…å­˜æ± çš„æ ¸å¿ƒåŠŸèƒ½ã€‚é”™è¯¯åˆ†ç±»æœºåˆ¶å°†é”™è¯¯åˆ†ä¸ºä¸´æ—¶é”™è¯¯ã€æ°¸ä¹…é”™è¯¯ã€ç³»ç»Ÿé”™è¯¯ç­‰ä¸åŒç±»å‹ã€‚

ã€€ã€€ä¸´æ—¶é”™è¯¯é‡‡ç”¨è‡ªåŠ¨é‡è¯•æœºåˆ¶ï¼Œä½¿ç”¨æŒ‡æ•°é€€é¿ç®—æ³•é¿å…é‡è¯•é£æš´ã€‚æ°¸ä¹…é”™è¯¯è®°å½•åˆ°é”™è¯¯æ—¥å¿—ä¸­ï¼Œä¾›åç»­åˆ†æå’Œå¤„ç†ã€‚ç³»ç»Ÿé”™è¯¯è§¦å‘å‘Šè­¦æœºåˆ¶ï¼ŒåŠæ—¶é€šçŸ¥è¿ç»´å›¢é˜Ÿã€‚

ã€€ã€€æ¢å¤æœºåˆ¶åœ¨ç³»ç»Ÿæ¢å¤æ­£å¸¸åè‡ªåŠ¨é‡æ–°å»ºç«‹è¿æ¥å’Œè®¢é˜…å…³ç³»ã€‚å¥åº·æ£€æŸ¥æœºåˆ¶å®šæœŸæ£€æŸ¥é›†æˆçŠ¶æ€ï¼ŒåŠæ—¶å‘ç°å’Œå¤„ç†å¼‚å¸¸æƒ…å†µã€‚

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### é«˜æ•ˆäº‹ä»¶å¤„ç†
ã€€ã€€é›†æˆå±‚é‡‡ç”¨å¤šé¡¹æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ç¡®ä¿é«˜æ•ˆçš„äº‹ä»¶å¤„ç†ã€‚äº‹ä»¶æ± æŠ€æœ¯å¤ç”¨äº‹ä»¶å¯¹è±¡ï¼Œå‡å°‘å†…å­˜åˆ†é…å¼€é”€ã€‚æ‰¹é‡å¤„ç†æœºåˆ¶å°†å¤šä¸ªå°äº‹ä»¶åˆå¹¶å¤„ç†ï¼Œæé«˜å¤„ç†æ•ˆç‡ã€‚

ã€€ã€€å¹¶è¡Œå¤„ç†æ”¯æŒå¤šä¸ªç‹¬ç«‹äº‹ä»¶çš„å¹¶è¡Œå¤„ç†ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸å¤„ç†èƒ½åŠ›ã€‚ä¼˜å…ˆçº§é˜Ÿåˆ—ç¡®ä¿é‡è¦äº‹ä»¶èƒ½å¤Ÿä¼˜å…ˆå¤„ç†ã€‚ç¼“å­˜æœºåˆ¶å°†é¢‘ç¹è®¿é—®çš„äº‹ä»¶æ•°æ®ä¿æŒåœ¨å¿«é€Ÿç¼“å­˜ä¸­ã€‚

ã€€ã€€å¼‚æ­¥IOé¿å…é˜»å¡ç­‰å¾…ï¼Œæé«˜ç³»ç»Ÿååé‡ã€‚å‹ç¼©ä¼ è¾“å‡å°‘ç½‘ç»œå¸¦å®½ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯å¯¹å¤§äº‹ä»¶çš„ä¼ è¾“ä¼˜åŒ–ã€‚

### ç›‘æ§ä¸è°ƒä¼˜
ã€€ã€€é›†æˆå±‚æä¾›å…¨é¢çš„æ€§èƒ½ç›‘æ§èƒ½åŠ›ï¼ŒåŒ…æ‹¬äº‹ä»¶å¤„ç†å»¶è¿Ÿã€ååé‡ã€é”™è¯¯ç‡ã€é˜Ÿåˆ—é•¿åº¦ç­‰å…³é”®æŒ‡æ ‡ã€‚å®æ—¶ç›‘æ§å¸®åŠ©åŠæ—¶å‘ç°æ€§èƒ½ç“¶é¢ˆå’Œå¼‚å¸¸æƒ…å†µã€‚

ã€€ã€€æ€§èƒ½åˆ†æå·¥å…·å¯ä»¥è¯†åˆ«çƒ­ç‚¹ä»£ç å’Œæ€§èƒ½ç“¶é¢ˆï¼ŒæŒ‡å¯¼ä¼˜åŒ–å·¥ä½œã€‚å®¹é‡è§„åˆ’å·¥å…·åŸºäºå†å²æ•°æ®é¢„æµ‹æœªæ¥çš„å¤„ç†èƒ½åŠ›éœ€æ±‚ã€‚è‡ªåŠ¨è°ƒä¼˜æœºåˆ¶æ ¹æ®å®é™…è´Ÿè½½åŠ¨æ€è°ƒæ•´å¤„ç†å‚æ•°ã€‚

ã€€ã€€å‘Šè­¦ç³»ç»Ÿåœ¨å…³é”®æŒ‡æ ‡å¼‚å¸¸æ—¶åŠæ—¶é€šçŸ¥ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–è¿ç»´å“åº”ã€‚æ—¥å¿—ç³»ç»Ÿè®°å½•è¯¦ç»†çš„å¤„ç†æ—¥å¿—ï¼Œæ”¯æŒé—®é¢˜è¯Šæ–­å’Œæ€§èƒ½åˆ†æã€‚

---

## ğŸ“ **æ¨¡å—ç»„ç»‡ç»“æ„**

ã€å†…éƒ¨æ¨¡å—æ¶æ„ã€‘

```
internal/core/mempool/integration/
â”œâ”€â”€ ğŸ“¢ event/                           # äº‹ä»¶ç³»ç»Ÿé›†æˆç›®å½•
â”‚   â”œâ”€â”€ ğŸ“¥ incoming/                     # å…¥ç«™äº‹ä»¶å¤„ç†
â”‚   â”‚   â”œâ”€â”€ fx_wiring.go                # ç”Ÿå‘½å‘¨æœŸé›†æˆå’Œè®¢é˜…ç®¡ç†
â”‚   â”‚   â””â”€â”€ README.md                   # å…¥ç«™äº‹ä»¶å¤„ç†æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“¤ outgoing/                     # å‡ºç«™äº‹ä»¶å‘å¸ƒ
â”‚   â”‚   â”œâ”€â”€ fx_wiring.go                # ä¾èµ–æ³¨å…¥å’Œæ¥å£æ³¨å…¥
â”‚   â”‚   â””â”€â”€ README.md                   # å‡ºç«™äº‹ä»¶å‘å¸ƒæ–‡æ¡£
â”‚   â””â”€â”€ README.md                        # äº‹ä»¶ç³»ç»Ÿæ€»æ–‡æ¡£
â”œâ”€â”€ ğŸ“ README.md                         # æœ¬æ–‡æ¡£
â””â”€â”€ ğŸ“Š tests/                            # æµ‹è¯•æ–‡ä»¶ç›®å½•
    â”œâ”€â”€ event_integration_test.go        # äº‹ä»¶é›†æˆæµ‹è¯•
    â”œâ”€â”€ incoming_events_test.go          # å…¥ç«™äº‹ä»¶æµ‹è¯•
    â”œâ”€â”€ outgoing_events_test.go          # å‡ºç«™äº‹ä»¶æµ‹è¯•
    â””â”€â”€ integration_test.go              # å®Œæ•´é›†æˆæµ‹è¯•
```

### **ğŸ¯ å­æ¨¡å—èŒè´£åˆ†å·¥**

| **ç›®å½•æ¨¡å—** | **æ ¸å¿ƒèŒè´£** | **å¯¹å¤–æ¥å£** | **å†…éƒ¨ç»„ä»¶** | **å¤æ‚åº¦** |
|-------------|-------------|-------------|-------------|-----------|
| `event/` | äº‹ä»¶é©±åŠ¨é›†æˆçš„æ ¸å¿ƒå®ç°å’Œç®¡ç† | EventIntegration | åè°ƒå™¨ã€è·¯ç”±å™¨ã€è½¬æ¢å™¨ | é«˜ |
| `event/incoming/` | å…¥ç«™äº‹ä»¶çš„è®¢é˜…å’Œå¤„ç† | IncomingEvents | è®¢é˜…ç®¡ç†ã€æ¥æ”¶å¤„ç†ã€æ ¼å¼è½¬æ¢ | ä¸­ |
| `event/outgoing/` | å‡ºç«™äº‹ä»¶çš„å‘å¸ƒå’Œåˆ†å‘ | OutgoingEvents | å‘å¸ƒå™¨ã€æ ‡å‡†åŒ–å™¨ã€æ‰¹é‡å¤„ç† | ä¸­ |
| `tests/` | é›†æˆåŠŸèƒ½æµ‹è¯•éªŒè¯ | æµ‹è¯•å·¥å…·å’Œæ¡†æ¶ | å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯• | ä¸­ |

---

## ğŸ”„ **ç»Ÿä¸€é›†æˆå®ç°**

ã€å®ç°ç­–ç•¥ã€‘

ã€€ã€€æ‰€æœ‰é›†æˆç»„ä»¶å‡ä¸¥æ ¼éµå¾ª**äº‹ä»¶é©±åŠ¨é€šä¿¡**æ¶æ„æ¨¡å¼ï¼Œç¡®ä¿å†…å­˜æ± ä¸å¤–éƒ¨ç³»ç»Ÿçš„æ¾è€¦åˆã€é«˜æ•ˆç‡ã€å¯é æ€§é›†æˆã€‚

```mermaid
flowchart TD
    subgraph "ç»Ÿä¸€é›†æˆå®ç°æ¶æ„"
        subgraph "å¤–éƒ¨äº‹ä»¶æ¥æ”¶é˜¶æ®µ"
            A[å¤–éƒ¨ç³»ç»Ÿäº‹ä»¶] --> B{äº‹ä»¶ç±»å‹è¯†åˆ«}
            B -->|åŒºå—äº‹ä»¶| C[åŒºå—ç¡®è®¤/å›æ»šå¤„ç†]
            B -->|ç½‘ç»œäº‹ä»¶| D[ç½‘ç»œçŠ¶æ€å˜æ›´å¤„ç†]
            B -->|å…±è¯†äº‹ä»¶| E[å…±è¯†çŠ¶æ€å˜æ›´å¤„ç†]
        end
        
        subgraph "äº‹ä»¶å¤„ç†è½¬æ¢é˜¶æ®µ"
            C --> F[æ ¼å¼è½¬æ¢å¤„ç†]
            F --> G[äº‹ä»¶éªŒè¯æ£€æŸ¥]
            G --> H[ç›®æ ‡ç»„ä»¶è·¯ç”±]
            H --> I[æ¥å£å›è°ƒæ‰§è¡Œ]
        end
        
        subgraph "å†…éƒ¨çŠ¶æ€å˜æ›´é˜¶æ®µ"
            D --> J[äº¤æ˜“æ± çŠ¶æ€æ›´æ–°]
            J --> K[å€™é€‰åŒºå—æ± çŠ¶æ€æ›´æ–°]
            K --> L[ç”Ÿå‘½å‘¨æœŸçŠ¶æ€å˜æ›´]
            L --> M[ç´¢å¼•ç¼“å­˜æ›´æ–°]
        end
        
        subgraph "å‡ºç«™äº‹ä»¶å‘å¸ƒé˜¶æ®µ"
            E --> N[å†…éƒ¨äº‹ä»¶è§¦å‘]
            N --> O[äº‹ä»¶æ ‡å‡†åŒ–å¤„ç†]
            O --> P[ä¸»é¢˜ç®¡ç†åˆ†ç±»]
            P --> Q[æ‰¹é‡å‘å¸ƒä¼˜åŒ–]
        end
        
        subgraph "è´¨é‡ä¿éšœé˜¶æ®µ"
            I --> R[å¤„ç†ç»“æœéªŒè¯]
            M --> S[çŠ¶æ€ä¸€è‡´æ€§æ£€æŸ¥]
            Q --> T[å‘å¸ƒæˆåŠŸç¡®è®¤]
            T --> U[äº‹ä»¶ç»Ÿè®¡æ›´æ–°]
        end
        
        subgraph "é”™è¯¯å¤„ç†é˜¶æ®µ"
            R --> V{å¤„ç†çŠ¶æ€}
            V -->|æˆåŠŸ| W[æˆåŠŸäº‹ä»¶è®°å½•]
            V -->|å¤±è´¥| X[é”™è¯¯é‡è¯•å¤„ç†]
            S --> Y[ç›‘æ§æŒ‡æ ‡æ›´æ–°]
            X --> Z[è¿”å›å¤„ç†ç»“æœ]
        end
    end
```

**å…³é”®å®ç°è¦ç‚¹ï¼š**

1. **ç»Ÿä¸€äº‹ä»¶å¤„ç†æµç¨‹**ï¼š
   - æ ‡å‡†åŒ–çš„äº‹ä»¶æ¥æ”¶ã€è½¬æ¢ã€è·¯ç”±æœºåˆ¶
   - ä¸€è‡´çš„äº‹ä»¶éªŒè¯å’Œé”™è¯¯å¤„ç†ç­–ç•¥
   - å®Œæ•´çš„äº‹ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†

2. **é«˜æ•ˆé›†æˆé€šä¿¡**ï¼š
   - å¼‚æ­¥äº‹ä»¶å¤„ç†é¿å…é˜»å¡ä¸»è¦æ“ä½œ
   - æ™ºèƒ½çš„äº‹ä»¶èšåˆå’Œæ‰¹é‡å‘å¸ƒä¼˜åŒ–
   - åŸºäºä¼˜å…ˆçº§çš„äº‹ä»¶å¤„ç†è°ƒåº¦

3. **å¯é æ€§ä¿éšœæœºåˆ¶**ï¼š
   - äº‹ä»¶å¤„ç†çš„é”™è¯¯éš”ç¦»å’Œè‡ªåŠ¨é‡è¯•
   - å®Œæ•´çš„äº‹ä»¶å®¡è®¡å’ŒçŠ¶æ€ç›‘æ§
   - ä¼˜é›…çš„å¯åœå’Œèµ„æºæ¸…ç†æœºåˆ¶

---

## ğŸ—ï¸ **ä¾èµ–æ³¨å…¥æ¶æ„**

ã€fxæ¡†æ¶é›†æˆã€‘

ã€€ã€€å…¨é¢é‡‡ç”¨fxä¾èµ–æ³¨å…¥æ¡†æ¶ï¼Œå®ç°é›†æˆå±‚ç»„ä»¶é—´çš„æ¾è€¦åˆå’Œç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨ç®¡ç†ã€‚

**ä¾èµ–æ³¨å…¥è®¾è®¡**ï¼š
- **é›†æˆç»„ä»¶è£…é…**ï¼šè‡ªåŠ¨è£…é…äº‹ä»¶åè°ƒå™¨ã€è·¯ç”±å™¨ã€è½¬æ¢å™¨ã€å‘å¸ƒå™¨
- **é€šä¿¡é€šé“æ³¨å…¥**ï¼šç»Ÿä¸€æ³¨å…¥å…¥ç«™é€šé“ã€å‡ºç«™é€šé“ã€åŒå‘é€šé“ç®¡ç†å™¨
- **å¤„ç†å™¨ç³»ç»Ÿé›†æˆ**ï¼šé€šè¿‡æ¥å£æ³¨å…¥å…¥ç«™å¤„ç†å™¨ã€å‡ºç«™å‘å¸ƒå™¨ã€äº‹ä»¶è¿‡æ»¤å™¨
- **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šè‡ªåŠ¨ç®¡ç†é›†æˆæœåŠ¡çš„åˆå§‹åŒ–ã€è®¢é˜…å»ºç«‹å’Œä¼˜é›…å…³é—­

**æ ¸å¿ƒç»„ä»¶ä¾èµ–å…³ç³»**ï¼š
- EventIntegrationä¾èµ–EventCoordinatorã€EventRouterã€EventTransformer
- IncomingProcessorä¾èµ–SubscriptionManagerã€EventReceiverã€CallbackRouter
- OutgoingPublisherä¾èµ–EventStandardizerã€TopicManagerã€BatchPublisher
- æ‰€æœ‰ç»„ä»¶å…±äº«EventBusã€Loggerã€Configã€ErrorHandlerç­‰åŸºç¡€æœåŠ¡

---

## ğŸ“Š **æ€§èƒ½ä¸ç›‘æ§**

ã€æ€§èƒ½æŒ‡æ ‡ã€‘

| **æ“ä½œç±»å‹** | **ç›®æ ‡å»¶è¿Ÿ** | **ååé‡ç›®æ ‡** | **æˆåŠŸç‡** | **ç›‘æ§æ–¹å¼** |
|-------------|-------------|---------------|-----------|------------|
| å…¥ç«™äº‹ä»¶å¤„ç† | < 2ms | > 8000 EPS | > 99% | å®æ—¶ç›‘æ§ |
| å‡ºç«™äº‹ä»¶å‘å¸ƒ | < 1ms | > 10000 PPS | > 99.5% | æ‰¹é‡ç»Ÿè®¡ |
| äº‹ä»¶è·¯ç”±åˆ†å‘ | < 0.5ms | > 15000 RPS | > 99% | å¼‚æ­¥ç›‘æ§ |
| æ ¼å¼è½¬æ¢ | < 0.3ms | > 20000 CPS | > 98% | å…³é”®è·¯å¾„ç›‘æ§ |
| è®¢é˜…ç®¡ç† | < 5ms | > 500 SMS | > 97% | å®šæ—¶ç›‘æ§ |
| é”™è¯¯é‡è¯• | < 10ms | > 200 RRS | > 95% | å¼‚å¸¸ç›‘æ§ |

**æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼š**
- **å¤„ç†ä¼˜åŒ–**ï¼šå¼‚æ­¥å¤„ç†ã€äº‹ä»¶é˜Ÿåˆ—ç¼“å†²ã€å¹¶è¡Œå¤„ç†
- **é€šä¿¡ä¼˜åŒ–**ï¼šè¿æ¥å¤ç”¨ã€å‹ç¼©ä¼ è¾“ã€æ™ºèƒ½æ‰¹é‡
- **å‘å¸ƒä¼˜åŒ–**ï¼šäº‹ä»¶èšåˆã€å»¶è¿Ÿå‘å¸ƒã€ä¼˜å…ˆçº§è°ƒåº¦
- **èµ„æºä¼˜åŒ–**ï¼šå¯¹è±¡æ± åŒ–ã€å†…å­˜å¤ç”¨ã€åƒåœ¾å›æ”¶ä¼˜åŒ–

---

## ğŸ”— **ä¸å…¬å…±æ¥å£çš„æ˜ å°„å…³ç³»**

ã€æ¥å£å®ç°æ˜ å°„ã€‘

```mermaid
classDiagram
    class EventIntegrationService {
        <<interface>>
        +SubscribeToExternalEvents()
        +PublishInternalEvent(event)
        +RegisterEventHandler(handler)
        +GetIntegrationStatus()
    }
    
    class EventIntegrationImpl {
        -eventCoordinator EventCoordinator
        -incomingProcessor IncomingProcessor
        -outgoingPublisher OutgoingPublisher
        -subscriptionManager SubscriptionManager
        +SubscribeToExternalEvents() error
        +PublishInternalEvent(event) error
        +RegisterEventHandler(handler) error
        +GetIntegrationStatus() IntegrationStatus
    }
    
    class IncomingEventProcessor {
        <<interface>>
        +ProcessIncomingEvent(event)
        +HandleSubscriptionEvent(event)
        +ValidateEvent(event)
        +RouteToComponent(event, target)
    }
    
    class IncomingProcessorImpl {
        -eventReceiver EventReceiver
        -formatConverter FormatConverter
        -callbackRouter CallbackRouter
        -eventValidator EventValidator
        +ProcessIncomingEvent(event) ProcessResult
        +HandleSubscriptionEvent(event) HandleResult
        +ValidateEvent(event) ValidationResult
        +RouteToComponent(event, target) RoutingResult
    }
    
    class OutgoingEventPublisher {
        <<interface>>
        +PublishEvent(event)
        +StandardizeEvent(event)
        +BatchPublishEvents(events)
        +GetPublishMetrics()
    }
    
    class OutgoingPublisherImpl {
        -eventStandardizer EventStandardizer
        -topicManager TopicManager
        -batchPublisher BatchPublisher
        -publishValidator PublishValidator
        +PublishEvent(event) error
        +StandardizeEvent(event) StandardizedEvent
        +BatchPublishEvents(events) BatchResult
        +GetPublishMetrics() PublishMetrics
    }
    
    EventIntegrationService <|-- EventIntegrationImpl : implements
    IncomingEventProcessor <|-- IncomingProcessorImpl : implements
    OutgoingEventPublisher <|-- OutgoingPublisherImpl : implements
```

**å®ç°è¦ç‚¹ï¼š**
- **æ¥å£å¥‘çº¦**ï¼šä¸¥æ ¼éµå¾ªäº‹ä»¶é›†æˆæ¥å£å®šä¹‰å’Œé€šä¿¡è§„èŒƒ
- **é”™è¯¯å¤„ç†**ï¼šåˆ†å±‚çš„é”™è¯¯å¤„ç†å’Œé›†æˆå¼‚å¸¸æ¢å¤æœºåˆ¶
- **æ—¥å¿—è®°å½•**ï¼šè¯¦ç»†çš„é›†æˆæ“ä½œæ—¥å¿—å’Œæ€§èƒ½æŒ‡æ ‡è®°å½•
- **æµ‹è¯•è¦†ç›–**ï¼šå…¨é¢çš„é›†æˆæµ‹è¯•ã€äº‹ä»¶å¤„ç†æµ‹è¯•å’Œé€šä¿¡æµ‹è¯•

---

## ğŸš€ **åç»­æ‰©å±•è§„åˆ’**

ã€æ¨¡å—æ¼”è¿›æ–¹å‘ã€‘

1. **é›†æˆèƒ½åŠ›å¢å¼º**
   - æ”¯æŒæ›´å¤šç±»å‹çš„å¤–éƒ¨ç³»ç»Ÿé›†æˆ
   - å®ç°è·¨é“¾äº‹ä»¶çš„é›†æˆå’ŒåŒæ­¥
   - æ·»åŠ æ™ºèƒ½çš„äº‹ä»¶è¿‡æ»¤å’Œè·¯ç”±

2. **æ€§èƒ½ä¼˜åŒ–æ”¹è¿›**
   - å®ç°æ›´é«˜æ•ˆçš„äº‹ä»¶å¤„ç†ç®—æ³•
   - ä¼˜åŒ–å¤§è§„æ¨¡äº‹ä»¶çš„å¤„ç†æ€§èƒ½
   - æ·»åŠ é¢„æµ‹æ€§çš„è´Ÿè½½å‡è¡¡

3. **å¯é æ€§æå‡**
   - å¢å¼ºäº‹ä»¶å¤„ç†çš„å®¹é”™èƒ½åŠ›
   - å®ç°æ›´æ™ºèƒ½çš„é”™è¯¯æ¢å¤æœºåˆ¶
   - æ·»åŠ äº‹ä»¶å¤„ç†çš„å¹‚ç­‰æ€§ä¿éšœ

4. **ç›‘æ§è¿ç»´å¢å¼º**
   - æä¾›å¯è§†åŒ–çš„é›†æˆç›‘æ§é¢æ¿
   - å®ç°æ™ºèƒ½çš„é›†æˆçŠ¶æ€å‘Šè­¦
   - æ·»åŠ è‡ªåŠ¨åŒ–çš„é›†æˆè¯Šæ–­å·¥å…·

---

## ğŸ“‹ **å¼€å‘æŒ‡å—**

ã€é›†æˆå±‚å¼€å‘è§„èŒƒã€‘

1. **æ–°é›†æˆç»„ä»¶æ¥å…¥æ­¥éª¤**ï¼š
   - å®šä¹‰é›†æˆç»„ä»¶æ¥å£å’Œé€šä¿¡å¥‘çº¦
   - å®ç°æ ¸å¿ƒäº‹ä»¶å¤„ç†é€»è¾‘å’Œè·¯ç”±åŠŸèƒ½
   - æ·»åŠ é”™è¯¯å¤„ç†å’Œç›‘æ§ç»Ÿè®¡åŠŸèƒ½
   - å®Œæˆç»„ä»¶æµ‹è¯•å’Œé›†æˆå±‚æµ‹è¯•

2. **ä»£ç è´¨é‡è¦æ±‚**ï¼š
   - éµå¾ªGoè¯­è¨€æœ€ä½³å®è·µå’Œé¡¹ç›®ç¼–ç è§„èŒƒ
   - å®ç°å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œå¼‚å¸¸æ¢å¤æœºåˆ¶
   - æä¾›è¯¦ç»†çš„ä»£ç æ³¨é‡Šå’ŒæŠ€æœ¯æ–‡æ¡£
   - ä¿è¯100%çš„æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•è¦†ç›–ç‡

3. **æ€§èƒ½è¦æ±‚**ï¼š
   - å…³é”®è·¯å¾„å»¶è¿ŸæŒ‡æ ‡å¿…é¡»è¾¾åˆ°è®¾è®¡ç›®æ ‡
   - å†…å­˜ä½¿ç”¨æ•ˆç‡å’Œå¹¶å‘å®‰å…¨çš„æ•°æ®è®¿é—®
   - å®ç°åˆç†çš„ç¼“å­˜ç­–ç•¥å’Œèµ„æºæ¸…ç†
   - æ”¯æŒé«˜é¢‘äº‹ä»¶å¤„ç†å’Œé€šä¿¡éœ€æ±‚

ã€å‚è€ƒæ–‡æ¡£ã€‘
- [ä¸»å†…å­˜æ± å±‚](../README.md)
- [äº‹ä»¶ç³»ç»Ÿæ€»è§ˆ](event/README.md)
- [å…¥ç«™äº‹ä»¶å¤„ç†](event/incoming/README.md)
- [å‡ºç«™äº‹ä»¶å‘å¸ƒ](event/outgoing/README.md)
- [WESæ¶æ„è®¾è®¡æ–‡æ¡£](../../../../docs/architecture/)

---

> ğŸ“ **æ¨¡æ¿è¯´æ˜**ï¼šæœ¬READMEæ¨¡æ¿åŸºäºWES v0.0.1ç»Ÿä¸€æ–‡æ¡£è§„èŒƒè®¾è®¡ï¼Œä½¿ç”¨æ—¶è¯·æ ¹æ®å…·ä½“æ¨¡å—éœ€æ±‚æ›¿æ¢ç›¸åº”çš„å ä½ç¬¦å†…å®¹ï¼Œå¹¶ç¡®ä¿æ‰€æœ‰ç« èŠ‚éƒ½æœ‰å®è´¨æ€§çš„æŠ€æœ¯å†…å®¹ã€‚

> ğŸ”„ **ç»´æŠ¤æŒ‡å—**ï¼šæœ¬æ–‡æ¡£åº”éšç€æ¨¡å—åŠŸèƒ½çš„æ¼”è¿›åŠæ—¶æ›´æ–°ï¼Œç¡®ä¿æ–‡æ¡£ä¸ä»£ç å®ç°çš„ä¸€è‡´æ€§ã€‚å»ºè®®åœ¨æ¯æ¬¡é‡å¤§åŠŸèƒ½å˜æ›´åæ›´æ–°ç›¸åº”ç« èŠ‚ã€‚

## ğŸ”— **ç›¸å…³æ–‡æ¡£**
