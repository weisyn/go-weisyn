# äº¤æ˜“äº‹ä»¶å¤„ç†å™¨ï¼ˆinternal/core/tx/processor/event_handlerï¼‰

---

## ğŸ“Œ ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬**ï¼š1.0
- **çŠ¶æ€**ï¼šstable
- **æœ€åæ›´æ–°**ï¼š2025-11-30
- **æœ€åå®¡æ ¸**ï¼š2025-11-30
- **æ‰€æœ‰è€…**ï¼šTXæ¨¡å—å›¢é˜Ÿ
- **é€‚ç”¨èŒƒå›´**ï¼šinternal/core/tx/processor/event_handler æ¨¡å—

---

## ğŸ¯ **å­åŸŸå®šä½**

**è·¯å¾„**ï¼š`internal/core/tx/processor/event_handler/`

**æ‰€å±ç»„ä»¶**ï¼š`tx`

**æ ¸å¿ƒèŒè´£**ï¼šç›‘å¬äº¤æ˜“ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å¹¶ç»´æŠ¤ç»Ÿè®¡ä¿¡æ¯ï¼Œæä¾›äº¤æ˜“å¤„ç†çš„å¯è§‚æµ‹æ€§ã€‚

**åœ¨ç»„ä»¶ä¸­çš„è§’è‰²**ï¼š
- ç›‘å¬äº¤æ˜“ä»æ¥æ”¶åˆ°ç¡®è®¤çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸäº‹ä»¶
- å“åº”å†…å­˜æ± çš„äº¤æ˜“çŠ¶æ€å˜åŒ–é€šçŸ¥
- ç»´æŠ¤äº¤æ˜“å¤„ç†çš„æ€§èƒ½æŒ‡æ ‡å’Œé”™è¯¯ç»Ÿè®¡

**è§£å†³ä»€ä¹ˆé—®é¢˜**ï¼š
- ç›‘å¬äº¤æ˜“ä»æ¥æ”¶åˆ°ç¡®è®¤çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸäº‹ä»¶
- å“åº”å†…å­˜æ± çš„äº¤æ˜“çŠ¶æ€å˜åŒ–é€šçŸ¥
- ç»´æŠ¤äº¤æ˜“å¤„ç†çš„æ€§èƒ½æŒ‡æ ‡å’Œé”™è¯¯ç»Ÿè®¡

**ä¸è§£å†³ä»€ä¹ˆé—®é¢˜**ï¼ˆè¾¹ç•Œï¼‰ï¼š
- âŒ ä¸ä¿®æ”¹äº¤æ˜“çŠ¶æ€ï¼ˆåªåšç›‘å¬å’Œè®°å½•ï¼‰
- âŒ ä¸è§¦å‘äº¤æ˜“å¤„ç†æµç¨‹ï¼ˆè¢«åŠ¨å“åº”äº‹ä»¶ï¼‰
- âŒ ä¸å®ç°ä¸šåŠ¡é€»è¾‘ï¼ˆåªåšç»Ÿè®¡è¿½è¸ªï¼‰

---

## ğŸ¯ **è®¾è®¡åŸåˆ™ä¸æ ¸å¿ƒçº¦æŸ**

### **è®¾è®¡åŸåˆ™**

| åŸåˆ™ | è¯´æ˜ | ä»·å€¼ |
|------|------|------|
| **è¢«åŠ¨ç›‘å¬** | åªå“åº”äº‹ä»¶ï¼Œä¸ä¸»åŠ¨å‘èµ· | é¿å…å¾ªç¯ä¾èµ–å’Œå‰¯ä½œç”¨ |
| **ç»Ÿè®¡è¿½è¸ª** | ç»´æŠ¤äº¤æ˜“å¤„ç†çš„ç»Ÿè®¡å’Œæ€§èƒ½æŒ‡æ ‡ | æä¾›ç³»ç»Ÿè¿è¡ŒçŠ¶å†µçš„å¯è§‚æµ‹æ€§ |
| **æ— å‰¯ä½œç”¨** | ä¸ä¿®æ”¹äº¤æ˜“çŠ¶æ€ï¼Œåªåšè®°å½• | ä¿æŒç³»ç»ŸçŠ¶æ€çš„ä¸€è‡´æ€§ |

### **æ ¸å¿ƒçº¦æŸ** â­

**ä¸¥æ ¼éµå®ˆ**ï¼š
- âœ… **åªç›‘å¬ä¸ä¿®æ”¹**ï¼šä¸èƒ½ä¿®æ”¹äº¤æ˜“çŠ¶æ€æˆ–è§¦å‘ä¸šåŠ¡æµç¨‹
- âœ… **ç»Ÿè®¡ä¸€è‡´æ€§**ï¼šæ‰€æœ‰ç»Ÿè®¡æ•°æ®å¿…é¡»çº¿ç¨‹å®‰å…¨
- âœ… **æ—¥å¿—è®°å½•**ï¼šè®°å½•å…³é”®äº‹ä»¶ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥

**ä¸¥æ ¼ç¦æ­¢**ï¼š
- âŒ **ä¸èƒ½ä¿®æ”¹çŠ¶æ€**ï¼šä¸èƒ½ä¿®æ”¹äº¤æ˜“çŠ¶æ€æˆ–è§¦å‘éªŒè¯
- âŒ **ä¸èƒ½é˜»å¡æµç¨‹**ï¼šäº‹ä»¶å¤„ç†ä¸èƒ½é˜»å¡ä¸»æµç¨‹
- âŒ **ä¸èƒ½äº§ç”Ÿå‰¯ä½œç”¨**ï¼šä¸èƒ½å½±å“ç³»ç»Ÿçš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

---

## ğŸ—ï¸ **æ¶æ„è®¾è®¡**

### **åœ¨ç»„ä»¶ä¸­çš„ä½ç½®**

> **è¯´æ˜**ï¼šå±•ç¤ºæ­¤å­åŸŸåœ¨ç»„ä»¶å†…éƒ¨çš„ä½ç½®å’Œåä½œå…³ç³»

```mermaid
graph TB
    subgraph "ç»„ä»¶ internal/core/tx"
        subgraph "æœ¬å­åŸŸ processor/event_handler"
            THIS["EventHandler<br/>äº‹ä»¶ç›‘å¬å’Œç»Ÿè®¡"]
            
            HANDLER["handler.go<br/>EventHandlerå®ç°"]
            
            THIS --> HANDLER
        end
        
        subgraph "åä½œçš„å­åŸŸ"
            PROCESSOR["processor/<br/>äº¤æ˜“å¤„ç†åè°ƒå™¨"]
            INTEGRATION["integration/event/<br/>äº‹ä»¶é›†æˆæ¥å£"]
        end
        
        subgraph "å¤–éƒ¨åŸºç¡€è®¾æ–½"
            EVENT_BUS["Event Bus<br/>äº‹ä»¶æ€»çº¿"]
        end
    end
    
    PROCESSOR --> THIS
    INTEGRATION --> THIS
    
    EVENT_BUS -.è®¢é˜….-> HANDLER
    
    style THIS fill:#FFD700
```

**ä½ç½®è¯´æ˜**ï¼š

| å…³ç³»ç±»å‹ | ç›®æ ‡ | å…³ç³»è¯´æ˜ |
|---------|------|---------|
| **åä½œ** | processor/ | processor ç»„åˆ EventHandler |
| **åä½œ** | integration/event/ | å®ç° TransactionEventSubscriber æ¥å£ |
| **è¾¹ç•Œ** | Event Bus | è®¢é˜…äº¤æ˜“ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ |

### **æ•´ä½“æ¶æ„**

```mermaid
graph TB
    subgraph "äº‹ä»¶æº"
        BLOCKCHAIN[Blockchain<br/>åŒºå—é“¾äº‹ä»¶]
        MEMPOOL[Mempool<br/>å†…å­˜æ± äº‹ä»¶]
        PROCESSOR[Processor<br/>å¤„ç†äº‹ä»¶]
    end
    
    subgraph "äº‹ä»¶æ€»çº¿"
        EVENTBUS[EventBus<br/>äº‹ä»¶æ€»çº¿]
    end
    
    subgraph "æœ¬æ¨¡å— - processor/event_handler"
        THIS[EventHandler<br/>ğŸ¯ äº‹ä»¶ç›‘å¬å’Œç»Ÿè®¡]
    end
    
    subgraph "è¾“å‡º"
        STATS[ç»Ÿè®¡ä¿¡æ¯<br/>ğŸ“Š æ€§èƒ½æŒ‡æ ‡]
        LOGS[æ—¥å¿—è®°å½•<br/>ğŸ“ è¿è¡Œæ—¥å¿—]
    end
    
    BLOCKCHAIN --> EVENTBUS
    MEMPOOL --> EVENTBUS
    PROCESSOR --> EVENTBUS
    EVENTBUS --> THIS
    THIS --> STATS
    THIS --> LOGS
    
    style THIS fill:#FFD700
```

### **äº‹ä»¶æµç¨‹**

```mermaid
sequenceDiagram
    participant EB as EventBus
    participant EH as EventHandler
    participant STATS as ç»Ÿè®¡æ•°æ®
    
    EB->>EH: 1. TransactionReceived
    EH->>STATS: æ›´æ–° receivedCount
    EH->>EH: è®°å½•æ—¥å¿—
    
    EB->>EH: 2. TransactionValidated
    EH->>STATS: æ›´æ–° validatedCount
    EH->>EH: è®°å½•æ—¥å¿—
    
    EB->>EH: 3. TransactionExecuted
    EH->>STATS: æ›´æ–° executedCount
    EH->>EH: è®°å½•æ—¥å¿—
    
    EB->>EH: 4. TransactionConfirmed
    EH->>STATS: æ›´æ–° confirmedCount
    EH->>EH: è®°å½•æ—¥å¿—
```

---

## ğŸ“ **ç›®å½•ç»“æ„**

```
processor/event_handler/
â”œâ”€â”€ handler.go          # EventHandler å®ç° | äº‹ä»¶è®¢é˜…å¤„ç†
â””â”€â”€ README.md           # æœ¬æ–‡æ¡£ | æ¨¡å—è¯´æ˜
```

### **ç»„ç»‡åŸåˆ™**

| æ–‡ä»¶ | èŒè´£ | ä¸ºä»€ä¹ˆè¿™æ ·ç»„ç»‡ |
|------|------|---------------|
| `handler.go` | äº‹ä»¶è®¢é˜…å¤„ç†å®ç° | å®ç° TransactionEventSubscriber æ¥å£ |
| `README.md` | æ¨¡å—æ–‡æ¡£ | è¯´æ˜è®¾è®¡ç†å¿µå’Œä½¿ç”¨æ–¹å¼ |

---

## ğŸ”— **ä¾èµ–ä¸åä½œ**

### **ä¾èµ–è¯´æ˜**

| ä¾èµ–æ¨¡å— | ä¾èµ–æ¥å£ | ç”¨é€” | çº¦æŸæ¡ä»¶ |
|---------|---------|------|---------|
| **infrastructure** | `event.EventBus` | è®¢é˜…äº‹ä»¶ | å¯é€‰ä¾èµ– |
| **infrastructure** | `log.Logger` | æ—¥å¿—è®°å½• | å¯é€‰ä¾èµ– |

---

## ğŸ“š **ç›¸å…³æ–‡æ¡£**

- **æ¥å£å®šä¹‰**ï¼š`internal/core/tx/integration/event/` - äº‹ä»¶è®¢é˜…æ¥å£å®šä¹‰
- **äº‹ä»¶å¸¸é‡**ï¼š`pkg/constants/events/system_events.go` - ç³»ç»Ÿäº‹ä»¶å®šä¹‰
- **Processoræ–‡æ¡£**ï¼š`internal/core/tx/processor/README.md` - çˆ¶æ¨¡å—æ–‡æ¡£

---

## ğŸ“‹ **æ–‡æ¡£å˜æ›´è®°å½•**

| æ—¥æœŸ | å˜æ›´å†…å®¹ | åŸå›  |
|------|---------|------|
| 2025-11-30 | ç§»é™¤æ—§æ ¼å¼æ ‡è®° | ç¬¦åˆæ–‡æ¡£è§„èŒƒ |
| 2025-11-30 | æ·»åŠ "åœ¨ç»„ä»¶ä¸­çš„ä½ç½®"å›¾ | ç¬¦åˆ subdirectory-readme.md æ¨¡æ¿è¦æ±‚ |
| 2025-11-30 | è°ƒæ•´ç« èŠ‚æ ‡é¢˜å’Œé¡ºåº | ç¬¦åˆæ¨¡æ¿è§„èŒƒ |
| 2025-10-23 | åˆå§‹ç‰ˆæœ¬ | åˆ›å»ºæ–‡æ¡£ |

---
