# WES è¿ç»´é—®é¢˜æ’æŸ¥

---

## ğŸ¯ æ•…éšœæ’æŸ¥æ¦‚è§ˆ

æœ¬æ–‡æ¡£å¸®åŠ©æ‚¨è§£å†³ WES èŠ‚ç‚¹è¿ç»´ä¸­çš„å¸¸è§é—®é¢˜ï¼Œæä¾›ç³»ç»ŸåŒ–çš„æ’æŸ¥æ–¹æ³•å’Œè§£å†³æ–¹æ¡ˆã€‚

**æ’æŸ¥åŸåˆ™**ï¼š
- ğŸ” **ä»ç°è±¡åˆ°æ ¹å› **ï¼šå…ˆè§‚å¯Ÿç°è±¡ï¼Œå†é€æ­¥æ·±å…¥æ’æŸ¥
- ğŸ“Š **æ•°æ®é©±åŠ¨**ï¼šåŸºäºæ—¥å¿—ã€æŒ‡æ ‡ã€çŠ¶æ€ä¿¡æ¯è¯Šæ–­
- ğŸ”„ **åˆ†å±‚æ’æŸ¥**ï¼šä»åŸºç¡€è®¾æ–½å±‚ â†’ ç½‘ç»œå±‚ â†’ åº”ç”¨å±‚ â†’ ä¸šåŠ¡å±‚

---

## ğŸ” æ•…éšœæ’æŸ¥æµç¨‹

### æ ‡å‡†æ’æŸ¥æµç¨‹

```mermaid
graph TD
    A[å‘ç°é—®é¢˜] --> B{æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€}
    B -->|èŠ‚ç‚¹æœªè¿è¡Œ| C[å¯åŠ¨é—®é¢˜æ’æŸ¥]
    B -->|èŠ‚ç‚¹è¿è¡Œä¸­| D{æ£€æŸ¥ç½‘ç»œè¿æ¥}
    D -->|ç½‘ç»œå¼‚å¸¸| E[ç½‘ç»œé—®é¢˜æ’æŸ¥]
    D -->|ç½‘ç»œæ­£å¸¸| F{æ£€æŸ¥åŒæ­¥çŠ¶æ€}
    F -->|åŒæ­¥å¼‚å¸¸| G[åŒæ­¥é—®é¢˜æ’æŸ¥]
    F -->|åŒæ­¥æ­£å¸¸| H{æ£€æŸ¥ä¸šåŠ¡åŠŸèƒ½}
    H -->|åŠŸèƒ½å¼‚å¸¸| I[ä¸šåŠ¡é—®é¢˜æ’æŸ¥]
    H -->|åŠŸèƒ½æ­£å¸¸| J[é—®é¢˜å·²è§£å†³]
```

---

## â“ å¸¸è§é—®é¢˜ä¸æ’æŸ¥

### é—®é¢˜ 1ï¼šèŠ‚ç‚¹æ— æ³•å¯åŠ¨

**ç°è±¡**ï¼š
- å¯åŠ¨å‘½ä»¤æ‰§è¡Œåç«‹å³é€€å‡º
- å¯åŠ¨åè¿›ç¨‹æ¶ˆå¤±
- å¯åŠ¨æ—¶æŠ¥é”™

**æ’æŸ¥æ­¥éª¤**ï¼š

#### æ­¥éª¤ 1ï¼šæ£€æŸ¥ç«¯å£å ç”¨

```bash
# æ£€æŸ¥ API ç«¯å£ï¼ˆé»˜è®¤ 8080ï¼‰
lsof -i :8080
# æˆ–
netstat -tulpn | grep 8080

# æ£€æŸ¥ P2P ç«¯å£ï¼ˆé»˜è®¤ 8081ï¼‰
lsof -i :8081
# æˆ–
netstat -tulpn | grep 8081
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¦‚æœç«¯å£è¢«å ç”¨ï¼Œåœæ­¢å ç”¨è¿›ç¨‹æˆ–ä¿®æ”¹é…ç½®ä¸­çš„ç«¯å£å·
- æŸ¥æ‰¾å ç”¨è¿›ç¨‹ï¼š`lsof -i :8080 | grep LISTEN`
- ç»ˆæ­¢è¿›ç¨‹ï¼š`kill -9 <PID>`

#### æ­¥éª¤ 2ï¼šæ£€æŸ¥é…ç½®æ–‡ä»¶

```bash
# éªŒè¯é…ç½®æ–‡ä»¶æ ¼å¼
wes node config validate

# æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la ~/.wes/config.yaml
# æˆ–
ls -la ./configs/development/config.json

# æ£€æŸ¥é…ç½®æ–‡ä»¶å†…å®¹ï¼ˆJSON/YAML æ ¼å¼ï¼‰
cat ~/.wes/config.yaml | yq .
# æˆ–
cat ./configs/development/config.json | jq .
```

**å¸¸è§é…ç½®é”™è¯¯**ï¼š
- JSON/YAML æ ¼å¼é”™è¯¯ï¼ˆç¼ºå°‘é€—å·ã€å¼•å·ä¸åŒ¹é…ï¼‰
- è·¯å¾„ä¸å­˜åœ¨ï¼ˆ`data_path`ã€`log_path` ç­‰ï¼‰
- ç«¯å£å·è¶…å‡ºèŒƒå›´ï¼ˆ0-65535ï¼‰
- ç½‘ç»œé…ç½®é”™è¯¯ï¼ˆ`network_id`ã€`chain_id` ä¸åŒ¹é…ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨é…ç½®éªŒè¯å‘½ä»¤æ£€æŸ¥ï¼š`wes node config validate`
- å‚è€ƒ [é…ç½®å‚è€ƒ](../reference/config/) æ£€æŸ¥é…ç½®é¡¹
- ä½¿ç”¨é»˜è®¤é…ç½®æµ‹è¯•ï¼š`wes node start --config default`

#### æ­¥éª¤ 3ï¼šæ£€æŸ¥æ•°æ®ç›®å½•æƒé™

```bash
# æ£€æŸ¥æ•°æ®ç›®å½•æ˜¯å¦å­˜åœ¨
ls -la ./data

# æ£€æŸ¥ç›®å½•æƒé™
stat ./data

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h ./data
```

**å¸¸è§æƒé™é—®é¢˜**ï¼š
- æ•°æ®ç›®å½•ä¸å­˜åœ¨
- æ•°æ®ç›®å½•æƒé™ä¸è¶³ï¼ˆéœ€è¦è¯»å†™æƒé™ï¼‰
- ç£ç›˜ç©ºé—´ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# åˆ›å»ºæ•°æ®ç›®å½•
mkdir -p ./data

# è®¾ç½®æ­£ç¡®çš„æƒé™
chmod 755 ./data

# æ£€æŸ¥ç£ç›˜ç©ºé—´ï¼ˆè‡³å°‘éœ€è¦ 10GBï¼‰
df -h
```

#### æ­¥éª¤ 4ï¼šæŸ¥çœ‹å¯åŠ¨æ—¥å¿—

```bash
# æŸ¥çœ‹æ ‡å‡†è¾“å‡º/é”™è¯¯
wes node start 2>&1 | tee node.log

# æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
tail -f ./logs/wes.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f ./logs/error.log

# æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯
grep -i error ./logs/wes.log | tail -20
```

**å¸¸è§å¯åŠ¨é”™è¯¯**ï¼š
- `bind: address already in use` - ç«¯å£è¢«å ç”¨
- `permission denied` - æƒé™ä¸è¶³
- `no such file or directory` - æ–‡ä»¶/ç›®å½•ä¸å­˜åœ¨
- `invalid configuration` - é…ç½®é”™è¯¯

---

### é—®é¢˜ 2ï¼šèŠ‚ç‚¹æ— æ³•è¿æ¥åˆ°ç½‘ç»œ

**ç°è±¡**ï¼š
- èŠ‚ç‚¹å¯åŠ¨æˆåŠŸä½†æ— æ³•å‘ç°å…¶ä»–èŠ‚ç‚¹
- `wes node peers` è¿”å›ç©ºåˆ—è¡¨
- èŠ‚ç‚¹å­¤ç«‹è¿è¡Œ

**æ’æŸ¥æ­¥éª¤**ï¼š

#### æ­¥éª¤ 1ï¼šæ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€

```bash
# æ£€æŸ¥èŠ‚ç‚¹åŸºæœ¬ä¿¡æ¯
wes node info

# æ£€æŸ¥èŠ‚ç‚¹è¿è¡ŒçŠ¶æ€
wes node status

# æ£€æŸ¥èŠ‚ç‚¹å¥åº·çŠ¶æ€
wes node health
```

**é¢„æœŸè¾“å‡º**ï¼š
```json
{
  "status": "healthy",
  "peer_count": 5,
  "is_syncing": false,
  "current_height": 12345
}
```

#### æ­¥éª¤ 2ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥

```bash
# æ£€æŸ¥æœ¬åœ°ç½‘ç»œæ¥å£
ip addr show
# æˆ–
ifconfig

# æµ‹è¯•ç½‘ç»œè¿é€šæ€§
ping 8.8.8.8

# æ£€æŸ¥ DNS è§£æ
nslookup example.com
```

#### æ­¥éª¤ 3ï¼šæ£€æŸ¥é˜²ç«å¢™é…ç½®

```bash
# Ubuntu/Debian - æ£€æŸ¥ UFW
sudo ufw status
sudo ufw status verbose

# CentOS/RHEL - æ£€æŸ¥ firewalld
sudo firewall-cmd --list-all

# æ£€æŸ¥ iptables è§„åˆ™
sudo iptables -L -n

# æ£€æŸ¥ç«¯å£æ˜¯å¦å¼€æ”¾
sudo netstat -tulpn | grep 8081
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# Ubuntu/Debian - å¼€æ”¾ç«¯å£
sudo ufw allow 8080/tcp
sudo ufw allow 8081/tcp
sudo ufw reload

# CentOS/RHEL - å¼€æ”¾ç«¯å£
sudo firewall-cmd --permanent --add-port=8080/tcp
sudo firewall-cmd --permanent --add-port=8081/tcp
sudo firewall-cmd --reload
```

#### æ­¥éª¤ 4ï¼šæ£€æŸ¥èŠ‚ç‚¹å‘ç°é…ç½®

```bash
# æ£€æŸ¥èŠ‚ç‚¹é…ç½®
wes node config show | grep -i bootstrap
wes node config show | grep -i discovery

# æ£€æŸ¥ Bootstrap èŠ‚ç‚¹åˆ—è¡¨
cat ~/.wes/config.yaml | grep -A 5 bootstrap
```

**å¸¸è§é—®é¢˜**ï¼š
- Bootstrap èŠ‚ç‚¹åˆ—è¡¨ä¸ºç©º
- Bootstrap èŠ‚ç‚¹åœ°å€é”™è¯¯
- èŠ‚ç‚¹å‘ç°åŠŸèƒ½è¢«ç¦ç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
- é…ç½®æœ‰æ•ˆçš„ Bootstrap èŠ‚ç‚¹
- æ£€æŸ¥ Bootstrap èŠ‚ç‚¹æ˜¯å¦å¯è¾¾ï¼š`ping <bootstrap-ip>`
- å¯ç”¨èŠ‚ç‚¹å‘ç°ï¼š`discovery.enabled: true`

#### æ­¥éª¤ 5ï¼šæ‰‹åŠ¨è¿æ¥èŠ‚ç‚¹

```bash
# æ‰‹åŠ¨è¿æ¥åˆ°æŒ‡å®šèŠ‚ç‚¹
wes node connect <peer-address>

# æŸ¥çœ‹è¿æ¥çŠ¶æ€
wes node peers

# æ£€æŸ¥è¿æ¥æ—¥å¿—
tail -f ./logs/wes.log | grep -i connect
```

---

### é—®é¢˜ 3ï¼šåŒºå—åŒæ­¥å¤±è´¥

**ç°è±¡**ï¼š
- èŠ‚ç‚¹é«˜åº¦é•¿æ—¶é—´ä¸å¢é•¿
- åŒæ­¥è¿›åº¦å¡åœ¨æŸä¸ªé«˜åº¦
- åŒæ­¥é”™è¯¯æ—¥å¿—é¢‘ç¹å‡ºç°

**æ’æŸ¥æ­¥éª¤**ï¼š

#### æ­¥éª¤ 1ï¼šæ£€æŸ¥åŒæ­¥çŠ¶æ€

```bash
# æ£€æŸ¥é“¾çŠ¶æ€
wes chain status

# æ£€æŸ¥åŒæ­¥è¿›åº¦
wes node status | grep -i sync

# æ£€æŸ¥å½“å‰é«˜åº¦å’Œç½‘ç»œé«˜åº¦
wes chain height
```

**é¢„æœŸè¾“å‡º**ï¼š
```json
{
  "current_height": 1000,
  "network_height": 1500,
  "sync_progress": 66.67,
  "is_syncing": true
}
```

#### æ­¥éª¤ 2ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥

```bash
# æ£€æŸ¥èŠ‚ç‚¹è¿æ¥æ•°
wes node peers | wc -l

# æ£€æŸ¥èŠ‚ç‚¹è¿æ¥è´¨é‡
wes node peers | grep -i "connected\|disconnected"

# æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿ
wes node status | grep -i latency
```

**é—®é¢˜è¯Šæ–­**ï¼š
- è¿æ¥æ•° < 3ï¼šç½‘ç»œè¿æ¥ä¸è¶³ï¼Œå¯èƒ½å¯¼è‡´åŒæ­¥æ…¢
- è¿æ¥æ•° = 0ï¼šå®Œå…¨å­¤ç«‹ï¼Œæ— æ³•åŒæ­¥
- å»¶è¿Ÿ > 1000msï¼šç½‘ç»œè´¨é‡å·®ï¼Œå½±å“åŒæ­¥é€Ÿåº¦

#### æ­¥éª¤ 3ï¼šæ£€æŸ¥å­˜å‚¨ç©ºé—´

```bash
# æ£€æŸ¥ç£ç›˜ä½¿ç”¨æƒ…å†µ
df -h

# æ£€æŸ¥æ•°æ®ç›®å½•å¤§å°
du -sh ./data

# æ£€æŸ¥åŒºå—æ•°æ®å¤§å°
du -sh ./data/blocks
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¦‚æœç£ç›˜ç©ºé—´ä¸è¶³ï¼Œæ¸…ç†æ—§æ•°æ®æˆ–æ‰©å®¹
- æ£€æŸ¥æ˜¯å¦æœ‰å¤§æ–‡ä»¶å ç”¨ç©ºé—´ï¼š`find ./data -type f -size +1G`

#### æ­¥éª¤ 4ï¼šæ£€æŸ¥æ•°æ®å®Œæ•´æ€§

```bash
# æ£€æŸ¥åŒºå—æ•°æ®å®Œæ•´æ€§
wes chain verify

# æ£€æŸ¥çŠ¶æ€æ ¹ä¸€è‡´æ€§
wes chain verify-state

# æ£€æŸ¥æœ€è¿‘çš„åŒºå—
wes chain block latest
```

**å¸¸è§é—®é¢˜**ï¼š
- åŒºå—æ•°æ®æŸå
- çŠ¶æ€æ ¹ä¸ä¸€è‡´
- åŒºå—å“ˆå¸ŒéªŒè¯å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å¦‚æœæ•°æ®æŸåï¼Œé‡ç½®åŒæ­¥
wes chain reset --sync

# ä»æŒ‡å®šé«˜åº¦é‡æ–°åŒæ­¥
wes chain reset --height 1000

# å®Œå…¨é‡ç½®ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
wes chain reset --all
```

#### æ­¥éª¤ 5ï¼šæ£€æŸ¥åŒæ­¥æ—¥å¿—

```bash
# æŸ¥çœ‹åŒæ­¥ç›¸å…³æ—¥å¿—
tail -f ./logs/wes.log | grep -i sync

# æŸ¥çœ‹åŒæ­¥é”™è¯¯
grep -i "sync.*error\|sync.*fail" ./logs/wes.log | tail -20

# æŸ¥çœ‹åŒæ­¥æ€§èƒ½æŒ‡æ ‡
wes node metrics | grep sync
```

---

### é—®é¢˜ 4ï¼šäº¤æ˜“æäº¤å¤±è´¥

**ç°è±¡**ï¼š
- äº¤æ˜“æäº¤åç«‹å³è¿”å›é”™è¯¯
- äº¤æ˜“æäº¤æˆåŠŸä½†é•¿æ—¶é—´æœªç¡®è®¤
- äº¤æ˜“è¢«æ‹’ç»

**æ’æŸ¥æ­¥éª¤**ï¼š

#### æ­¥éª¤ 1ï¼šæ£€æŸ¥äº¤æ˜“æ± çŠ¶æ€

```bash
# æ£€æŸ¥äº¤æ˜“æ± çŠ¶æ€
wes txpool status

# æ£€æŸ¥äº¤æ˜“æ± å¤§å°
wes node status | grep -i txpool

# æ£€æŸ¥å¾…å¤„ç†äº¤æ˜“æ•°
wes txpool pending
```

**é¢„æœŸè¾“å‡º**ï¼š
```json
{
  "pending": 100,
  "queued": 50,
  "max_size": 10000
}
```

**é—®é¢˜è¯Šæ–­**ï¼š
- `pending` æ¥è¿‘ `max_size`ï¼šäº¤æ˜“æ± å¯èƒ½å·²æ»¡
- `queued` æŒç»­å¢é•¿ï¼šäº¤æ˜“å¤„ç†é€Ÿåº¦è·Ÿä¸ä¸Šæäº¤é€Ÿåº¦

#### æ­¥éª¤ 2ï¼šæ£€æŸ¥äº¤æ˜“æ ¼å¼

```bash
# éªŒè¯äº¤æ˜“æ ¼å¼
wes tx validate <tx-hash>

# æ£€æŸ¥äº¤æ˜“è¯¦æƒ…
wes tx get <tx-hash>

# æ£€æŸ¥äº¤æ˜“çŠ¶æ€
wes tx status <tx-hash>
```

**å¸¸è§äº¤æ˜“é”™è¯¯**ï¼š
- `invalid signature` - ç­¾åæ— æ•ˆ
- `insufficient balance` - ä½™é¢ä¸è¶³
- `invalid nonce` - Nonce é”™è¯¯
- `transaction too large` - äº¤æ˜“è¿‡å¤§

#### æ­¥éª¤ 3ï¼šæ£€æŸ¥è´¦æˆ·ä½™é¢

```bash
# æ£€æŸ¥è´¦æˆ·ä½™é¢
wes account balance <address>

# æ£€æŸ¥è´¦æˆ· UTXO
wes account utxo <address>

# æ£€æŸ¥è´¦æˆ·äº¤æ˜“å†å²
wes account history <address>
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¦‚æœä½™é¢ä¸è¶³ï¼Œéœ€è¦å…ˆå……å€¼æˆ–ç­‰å¾…å…¶ä»–äº¤æ˜“ç¡®è®¤
- æ£€æŸ¥ UTXO æ˜¯å¦è¢«é”å®šï¼š`wes account utxo <address> | grep locked`

#### æ­¥éª¤ 4ï¼šæ£€æŸ¥ç½‘ç»œå’Œå…±è¯†çŠ¶æ€

```bash
# æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦åŒæ­¥
wes chain status | grep syncing

# æ£€æŸ¥å…±è¯†çŠ¶æ€
wes chain status | grep consensus

# æ£€æŸ¥æœ€æ–°åŒºå—æ—¶é—´
wes chain block latest | grep timestamp
```

**é—®é¢˜è¯Šæ–­**ï¼š
- å¦‚æœèŠ‚ç‚¹æœªåŒæ­¥ï¼Œäº¤æ˜“å¯èƒ½æ— æ³•è¢«æ‰“åŒ…
- å¦‚æœå…±è¯†å¼‚å¸¸ï¼ŒåŒºå—ç”Ÿäº§å¯èƒ½æš‚åœ

---

### é—®é¢˜ 5ï¼šèŠ‚ç‚¹é¢‘ç¹å´©æºƒ

**ç°è±¡**ï¼š
- èŠ‚ç‚¹è¿è¡Œä¸€æ®µæ—¶é—´åè‡ªåŠ¨é€€å‡º
- æ—¥å¿—ä¸­å‡ºç° panic æˆ– fatal é”™è¯¯
- å†…å­˜å ç”¨æŒç»­å¢é•¿åå´©æºƒ

**æ’æŸ¥æ­¥éª¤**ï¼š

#### æ­¥éª¤ 1ï¼šæ£€æŸ¥ç³»ç»Ÿèµ„æº

```bash
# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h

# æ£€æŸ¥ CPU ä½¿ç”¨
top -p $(pgrep wes)

# æ£€æŸ¥ç£ç›˜ I/O
iostat -x 1

# æ£€æŸ¥ç³»ç»Ÿè´Ÿè½½
uptime
```

**é—®é¢˜è¯Šæ–­**ï¼š
- å†…å­˜ä¸è¶³ï¼ˆOOMï¼‰ï¼š`dmesg | grep -i "out of memory"`
- CPU 100%ï¼šå¯èƒ½æ˜¯æ­»å¾ªç¯æˆ–è®¡ç®—å¯†é›†å‹ä»»åŠ¡
- ç£ç›˜ I/O é«˜ï¼šå¯èƒ½æ˜¯å­˜å‚¨æ€§èƒ½ç“¶é¢ˆ

#### æ­¥éª¤ 2ï¼šæ£€æŸ¥å´©æºƒæ—¥å¿—

```bash
# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
sudo journalctl -u wes -n 100

# æŸ¥çœ‹å´©æºƒå †æ ˆ
grep -i "panic\|fatal" ./logs/wes.log | tail -20

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -100 ./logs/error.log
```

**å¸¸è§å´©æºƒåŸå› **ï¼š
- å†…å­˜æ³„æ¼å¯¼è‡´ OOM
- å¹¶å‘è®¿é—®å†²çªï¼ˆrace conditionï¼‰
- ç©ºæŒ‡é’ˆå¼•ç”¨ï¼ˆnil pointerï¼‰
- æ•°ç»„è¶Šç•Œï¼ˆindex out of rangeï¼‰

#### æ­¥éª¤ 3ï¼šæ£€æŸ¥é…ç½®å’Œèµ„æºé™åˆ¶

```bash
# æ£€æŸ¥è¿›ç¨‹èµ„æºé™åˆ¶
ulimit -a

# æ£€æŸ¥æ–‡ä»¶æè¿°ç¬¦é™åˆ¶
ulimit -n

# æ£€æŸ¥é…ç½®ä¸­çš„èµ„æºé™åˆ¶
cat ~/.wes/config.yaml | grep -i "limit\|max\|memory"
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å¢åŠ æ–‡ä»¶æè¿°ç¬¦é™åˆ¶
ulimit -n 65535

# å¢åŠ å†…å­˜é™åˆ¶ï¼ˆå¦‚æœä½¿ç”¨ systemdï¼‰
# ç¼–è¾‘ systemd service æ–‡ä»¶ï¼Œæ·»åŠ ï¼š
# LimitNOFILE=65535
# MemoryLimit=8G
```

---

### é—®é¢˜ 6ï¼šAPI è¯·æ±‚è¶…æ—¶æˆ–å¤±è´¥

**ç°è±¡**ï¼š
- API è¯·æ±‚è¿”å›è¶…æ—¶é”™è¯¯
- API å“åº”æ—¶é—´è¿‡é•¿
- API è¿”å› 5xx é”™è¯¯

**æ’æŸ¥æ­¥éª¤**ï¼š

#### æ­¥éª¤ 1ï¼šæ£€æŸ¥èŠ‚ç‚¹å¥åº·çŠ¶æ€

```bash
# æ£€æŸ¥èŠ‚ç‚¹å¥åº·
curl http://localhost:8080/api/v1/health/liveness

# æ£€æŸ¥èŠ‚ç‚¹å°±ç»ªçŠ¶æ€
curl http://localhost:8080/api/v1/health/readiness

# æ£€æŸ¥èŠ‚ç‚¹ä¿¡æ¯
curl http://localhost:8080/api/v1/node/info
```

#### æ­¥éª¤ 2ï¼šæ£€æŸ¥ API æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥ API ç«¯å£ç›‘å¬
netstat -tulpn | grep 8080

# æ£€æŸ¥ API è¿›ç¨‹
ps aux | grep wes | grep api

# æ£€æŸ¥ API æ—¥å¿—
tail -f ./logs/api.log
```

#### æ­¥éª¤ 3ï¼šæ£€æŸ¥è¯·æ±‚è´Ÿè½½

```bash
# æ£€æŸ¥å½“å‰è¯·æ±‚æ•°
wes node metrics | grep -i "request\|api"

# æ£€æŸ¥è¯·æ±‚é˜Ÿåˆ—
wes node status | grep -i queue

# æ£€æŸ¥å“åº”æ—¶é—´
wes node metrics | grep -i "latency\|duration"
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¦‚æœè¯·æ±‚é˜Ÿåˆ—è¿‡é•¿ï¼Œè€ƒè™‘å¢åŠ  API å¹¶å‘å¤„ç†èƒ½åŠ›
- å¦‚æœå“åº”æ—¶é—´è¿‡é•¿ï¼Œæ£€æŸ¥åº•å±‚å­˜å‚¨å’Œç½‘ç»œæ€§èƒ½
- å¦‚æœé¢‘ç¹è¶…æ—¶ï¼Œæ£€æŸ¥è¶…æ—¶é…ç½®ï¼š`api.timeout`

---

## ğŸ“Š ç›‘æ§ä¸è¯Šæ–­å·¥å…·

### èŠ‚ç‚¹çŠ¶æ€ç›‘æ§

```bash
# å®æ—¶ç›‘æ§èŠ‚ç‚¹çŠ¶æ€
watch -n 1 'wes node status'

# ç›‘æ§èŠ‚ç‚¹æŒ‡æ ‡
wes node metrics

# ç›‘æ§é“¾çŠ¶æ€
watch -n 1 'wes chain status'
```

### æ—¥å¿—åˆ†æ

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f ./logs/wes.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f ./logs/error.log

# æœç´¢ç‰¹å®šé”™è¯¯
grep -i "error\|fail\|panic" ./logs/wes.log | tail -50

# æŒ‰æ—¶é—´èŒƒå›´æŸ¥çœ‹æ—¥å¿—
grep "2024-01-15 10:" ./logs/wes.log

# ç»Ÿè®¡é”™è¯¯ç±»å‹
grep -i error ./logs/wes.log | awk '{print $NF}' | sort | uniq -c | sort -rn
```

### æ€§èƒ½åˆ†æ

```bash
# æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨
htop

# æ£€æŸ¥ç½‘ç»œè¿æ¥
netstat -an | grep ESTABLISHED | wc -l

# æ£€æŸ¥ç£ç›˜ I/O
iostat -x 1 5

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h && ps aux --sort=-%mem | head -10
```

---

## ğŸ”§ å¸¸è§è¿ç»´æ“ä½œ

### èŠ‚ç‚¹é‡å¯

```bash
# ä¼˜é›…åœæ­¢èŠ‚ç‚¹
wes node stop

# ç­‰å¾…è¿›ç¨‹å®Œå…¨é€€å‡º
sleep 5

# æ£€æŸ¥è¿›ç¨‹æ˜¯å¦å·²é€€å‡º
ps aux | grep wes

# é‡æ–°å¯åŠ¨èŠ‚ç‚¹
wes node start
```

### æ•°æ®å¤‡ä»½

```bash
# å¤‡ä»½æ•°æ®ç›®å½•
tar -czf wes-backup-$(date +%Y%m%d).tar.gz ./data

# å¤‡ä»½é…ç½®æ–‡ä»¶
cp ~/.wes/config.yaml ~/.wes/config.yaml.backup

# å¤‡ä»½æ—¥å¿—ï¼ˆå¯é€‰ï¼‰
tar -czf wes-logs-$(date +%Y%m%d).tar.gz ./logs
```

### æ•°æ®æ¢å¤

```bash
# åœæ­¢èŠ‚ç‚¹
wes node stop

# æ¢å¤æ•°æ®ç›®å½•
tar -xzf wes-backup-20240115.tar.gz

# æ¢å¤é…ç½®æ–‡ä»¶
cp ~/.wes/config.yaml.backup ~/.wes/config.yaml

# é‡æ–°å¯åŠ¨èŠ‚ç‚¹
wes node start
```

### æ—¥å¿—æ¸…ç†

```bash
# æ¸…ç†æ—§æ—¥å¿—ï¼ˆä¿ç•™æœ€è¿‘ 7 å¤©ï¼‰
find ./logs -name "*.log" -mtime +7 -delete

# å‹ç¼©æ—§æ—¥å¿—
find ./logs -name "*.log" -mtime +3 -exec gzip {} \;

# æ¸…ç†é”™è¯¯æ—¥å¿—ï¼ˆè°¨æ…æ“ä½œï¼‰
# find ./logs -name "error.log" -size +100M -exec truncate -s 0 {} \;
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ€§èƒ½é—®é¢˜](./performance.md) - æ€§èƒ½ç›¸å…³é—®é¢˜æ’æŸ¥
- [é€šç”¨ FAQ](./faq.md) - é€šç”¨å¸¸è§é—®é¢˜
- [éƒ¨ç½²æŒ‡å—](../tutorials/deployment/) - éƒ¨ç½²é…ç½®è¯´æ˜
- [CLI å‚è€ƒ](../reference/cli/) - å‘½ä»¤è¡Œå·¥å…·æ–‡æ¡£
- [é…ç½®å‚è€ƒ](../reference/config/) - é…ç½®å­—æ®µè¯´æ˜
