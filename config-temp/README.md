# 启动阶段临时配置目录

## 🎯 目录用途

本目录 (`./config-temp`) 专门用于存储 **WES 应用启动阶段** 的临时配置文件，与运行时的业务临时存储 (`data/temp`) 完全分离。

## 📋 主要功能

### **启动时临时配置文件**
- 存储嵌入式配置的临时文件副本（`weisyn-{environment}-config-*.json`）
- 在应用启动早期阶段使用，此时核心服务还未完全初始化
- 提供配置系统初始化所需的文件系统访问

### **容错机制**
启动过程会按优先级尝试以下目录：
1. `./config-temp` - 启动配置专用临时目录（首选）
2. `.` - 当前工作目录（后备）
3. 系统临时目录 - 最后的容错选择

## 🔄 生命周期管理

### **创建时机**
- 应用启动时自动创建
- 由 `cmd/common/startup.go` 中的 `CreateTempConfigFile()` 函数管理

### **清理机制**
- 由 `cmd/cleanup/main.go` 负责清理遗留文件
- 应用正常退出时会自动清理临时配置文件
- 支持手动清理旧的临时文件

## 🚫 与 data/temp 的区别

| 特性 | ./config-temp | data/temp |
|-----|-------|-----------|
| **用途** | 启动阶段配置文件 | 运行时业务临时存储 |
| **时机** | 应用启动早期 | 应用运行期间 |
| **管理** | 简单文件操作 | 完整 TempStore 服务 |
| **清理** | 启动/清理脚本 | TTL 自动清理机制 |
| **容量限制** | 无特殊限制 | 1GB/10000个文件 |
| **生命周期** | 短期（启动完成即可清理） | 按业务需求的TTL管理 |

## ⚠️ 注意事项

- **不要手动删除正在使用的配置文件**
- **此目录与 `data/temp` 职责不同，不可混用**
- **遗留文件会由清理机制自动处理**
- **目录权限为 0755，文件权限为常规权限**

## 🛠️ 相关代码

- 创建逻辑: `cmd/common/startup.go`
- 清理逻辑: `cmd/cleanup/main.go` 
- 使用场景: 各环境的启动入口 (`cmd/development/`, `cmd/testing/`, `cmd/production/`)
