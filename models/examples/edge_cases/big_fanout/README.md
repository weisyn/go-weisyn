# big_fanout - å¤§æ‰‡å‡ºç½‘ç»œ

---

## ğŸ“Œ ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬**ï¼š1.0
- **çŠ¶æ€**ï¼šstable
- **æœ€åæ›´æ–°**ï¼š2025-11-12
- **æœ€åå®¡æ ¸**ï¼š2025-11-12
- **æ‰€æœ‰è€…**ï¼šAIæ¨¡å‹ç®¡ç†ç»„
- **é€‚ç”¨èŒƒå›´**ï¼šWES é¡¹ç›®ä¸­ big_fanout æ¨¡å‹ç›¸å…³åŠŸèƒ½

---

## ğŸ“ ç»„ä»¶å®šä½

å¤§æ‰‡å‡ºç½‘ç»œæ¨¡å‹ï¼Œç”¨äºæµ‹è¯•å¹¶è¡Œè®¡ç®—èƒ½åŠ›ã€‚è¯¥æ¨¡å‹åŒ…å« 100 ä¸ªå¹¶è¡ŒçŸ©é˜µä¹˜æ³•æ“ä½œï¼Œç„¶ååˆå¹¶æ±‚å’Œï¼Œä¸»è¦ç”¨äºéªŒè¯ WES å¹³å°å¯¹å¹¶è¡ŒåŒ–ç½‘ç»œçš„å¤„ç†èƒ½åŠ›ã€‚

## æ–‡ä»¶è¯´æ˜

- **example_big_fanout.onnx**: ONNX æ ¼å¼çš„æ¨¡å‹æ–‡ä»¶
- **generate_big_fanout.py**: ç”¨äºç”Ÿæˆæ¨¡å‹çš„ Python è„šæœ¬
  - â­ **è¯¦ç»†æ³¨é‡Š**ï¼šè„šæœ¬åŒ…å«è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼Œè§£é‡Šå¹¶è¡Œè®¡ç®—ã€æ‰‡å‡ºç½‘ç»œã€ONNX å¯¼å‡ºç­‰å…³é”®æ¦‚å¿µ
  - ğŸ“š **å­¦ä¹ ä»·å€¼**ï¼šé€‚åˆå­¦ä¹ å¹¶è¡Œè®¡ç®—ä¼˜åŒ–å’Œ WES å¹³å°æ€§èƒ½æµ‹è¯•

## æ¨¡å‹è§„æ ¼

### è¾“å…¥
- **åç§°**: `input`
- **å½¢çŠ¶**: `[1, 4]`
- **ç±»å‹**: `float32`
- **æè¿°**: 1x4 å‘é‡

### è¾“å‡º
- **åç§°**: `output`
- **å½¢çŠ¶**: `[1, 4]`
- **ç±»å‹**: `float32`
- **æè¿°**: 1x4 å‘é‡ï¼ˆ100 ä¸ªå¹¶è¡ŒçŸ©é˜µä¹˜æ³•çš„åˆå¹¶å’Œï¼‰

### ç½‘ç»œç»“æ„
- 100 ä¸ªå¹¶è¡Œ FC å±‚ï¼ˆæ¯ä¸ª 4x4 çŸ©é˜µï¼‰
- åˆå¹¶æ‰€æœ‰ç»“æœ
- æ±‚å’Œæ“ä½œ

## ä½¿ç”¨æ–¹æ³•

### é‡æ–°ç”Ÿæˆæ¨¡å‹

```bash
cd big_fanout
python generate_big_fanout.py
```

### ä¾èµ–è¦æ±‚

```bash
pip install torch onnx
```

### Python æµ‹è¯•ç¤ºä¾‹

```python
import onnxruntime as ort
import numpy as np

# åŠ è½½æ¨¡å‹
session = ort.InferenceSession("example_big_fanout.onnx")

# å‡†å¤‡è¾“å…¥æ•°æ®
inputs = np.random.rand(1, 4).astype(np.float32)

# è¿è¡Œæ¨ç†
outputs = session.run(["output"], {"input": inputs})

print(f"Output shape: {outputs[0].shape}")
```

### WES éƒ¨ç½²

```bash
wes ai deploy example_big_fanout.onnx \
    --name "Big Fanout Network" \
    --description "Test model for large fanout networks"
```
## ğŸ§ª æµ‹è¯•è§„èŒƒï¼ˆWESï¼‰

### 1. å‚è€ƒç¯å¢ƒ

- **WES ç‰ˆæœ¬**ï¼š`weisyn-testing`ï¼ˆ`make build-test`ï¼‰
- **è¿è¡Œç¯å¢ƒ**ï¼š`env = testing`ï¼Œå•èŠ‚ç‚¹æ¨¡å¼

### 2. åŸºå‡†æµ‹è¯•ç”¨ä¾‹ï¼ˆCanonical Test Caseï¼‰

#### è¾“å…¥å®šä¹‰

| åç§°    | å½¢çŠ¶     | æ•°æ®ç±»å‹  | å­—æ®µ  | ç¤ºä¾‹å€¼              |
|---------|----------|-----------|-------|---------------------|
| `input` | `[1, 4]` | `float32` | `data` | `[1.0, 2.0, 3.0, 4.0]` |

å¯¹åº” JSON ç‰‡æ®µï¼š

```json
[
  {
    "name": "input",
    "data": [1.0, 2.0, 3.0, 4.0],
    "shape": [1, 4],
    "data_type": "float32"
  }
]
```

#### æœŸæœ›è¾“å‡º

- è¾“å‡º 0ï¼ˆ`output`ï¼‰ï¼š
  - å½¢çŠ¶ï¼š`[1, 4]`
  - ç±»å‹ï¼š`float32`
  - æ•°å€¼ï¼šä¸è¾“å…¥ç›¸åŒå½¢çŠ¶çš„å‘é‡ï¼Œå€¼ä¾å…·ä½“æƒé‡è€Œå®šï¼Œæœ¬ç”¨ä¾‹ä¸åšä¸¥æ ¼æ•°å€¼æ–­è¨€ã€‚

### 3. å…¸å‹å¤ç°æ­¥éª¤

#### è„šæœ¬è·¯å¾„ï¼ˆæ¨èï¼‰

```bash
make build-test
bash scripts/testing/models/onnx_models_test.sh example_big_fanout
```

### 4. å·²çŸ¥é™åˆ¶ & å›å½’è¦æ±‚

- **ç±»åˆ«**ï¼š`Stress`ï¼ˆæ›´å…³æ³¨å¹¶è¡Œç»“æ„ä¸æ€§èƒ½ï¼‰
- å›å½’æ—¶ä¸»è¦å…³æ³¨ï¼š
  - æ¨¡å‹éƒ¨ç½²ä¸èµ„æºç´¢å¼•æ˜¯å¦æ­£å¸¸ï¼›
  - åœ¨é«˜æ‰‡å‡ºè®¡ç®—ä¸‹èŠ‚ç‚¹æ˜¯å¦ç¨³å®šï¼Œæ— å†…å­˜æ³„æ¼æˆ–é‡å¤§æ€§èƒ½é€€åŒ–ã€‚

## æµ‹è¯•åœºæ™¯

- âœ… å¹¶è¡Œè®¡ç®—æ€§èƒ½
- âœ… å¤§æ‰‡å‡ºç½‘ç»œå¤„ç†
- âœ… å†…å­˜ç®¡ç†
- âœ… è®¡ç®—èµ„æºåˆ†é…

## æ¨¡å‹æ¥æº

**åŸå§‹ä»“åº“**: [onnxruntime_go](https://github.com/yalue/onnxruntime_go)  
**è®¸å¯è¯**: MIT License


