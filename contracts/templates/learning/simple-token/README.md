# 💰 我的第一个代币合约 - 学习版

## 🎯 学习目标

通过这个简化的代币模板，你将学会：
- ✅ **理解代币概念** - 什么是代币，它能做什么
- ✅ **掌握转账机制** - 如何在区块链上转移价值
- ✅ **学会状态管理** - 如何查询和管理代币余额
- ✅ **理解UTXO模型** - WES独特的资产管理方式

## 🤔 什么是代币？

### 📚 生活化理解
　　代币就像游戏里的**金币**：
- 🪙 你可以赚取金币（获得代币）
- 💸 你可以花费金币（转账代币）
- 📊 你可以查看金币数量（查询余额）
- 🏦 系统记录总共有多少金币（总发行量）

### 🔍 技术概念
- **可互换性** - 每个代币都相同，就像人民币一样
- **可分割性** - 可以转账任意数量，如0.5个代币
- **可验证性** - 所有转账都在区块链上公开记录
- **稀缺性** - 总量有限，不能随意增发

## 📝 核心功能

### 1. 💸 转账功能 (`Transfer`)
```go
// 🎯 作用：将代币从一个地址转到另一个地址
// 💭 就像你给朋友转账一样，只是这里用的是代币

func Transfer(params) {
    // 1. 获取转账参数：给谁转、转多少
    // 2. 验证转账人有足够的余额
    // 3. 执行UTXO转账（WES特色）
    // 4. 发出转账事件通知全网
}
```

### 2. 💰 余额查询 (`GetBalance`)
```go
// 🎯 作用：查询某个地址有多少代币
// 💭 就像查银行卡余额一样简单

func GetBalance(address) {
    // 在WES中，余额 = 这个地址拥有的所有UTXO总和
    balance := framework.QueryBalance(address, tokenID)
    return balance
}
```

### 3. 📊 总量查询 (`GetTotalSupply`)
```go
// 🎯 作用：查询代币的总发行量
// 💭 就像查询某种货币一共印了多少张

func GetTotalSupply() {
    // 统计所有地址的代币总和
    return totalSupply
}
```

### 4. 📋 合约信息 (`GetContractInfo`)
```go
// 🎯 作用：获取代币的基本信息
// 💭 就像查看货币的"身份证"

func GetContractInfo() {
    return {
        name: "我的代币",
        symbol: "MYT", 
        decimals: 18,
        version: "1.0.0"
    }
}
```

## 🌟 WES特色：UTXO模型

### 🤔 什么是UTXO？
　　UTXO（未花费交易输出）是WES独特的资产管理方式：

### 🏦 传统模式 vs 🪙 UTXO模式

| 传统账户模式 | WES UTXO模式 |
|-------------|---------------|
| 💳 Alice余额：100 | 🪙 Alice拥有：[50, 30, 20] |
| 💸 转账30给Bob | 🔄 花费50，找零20，给Bob30 |
| 💳 结果：Alice=70, Bob=30 | 🪙 结果：Alice=[20,20], Bob=[30] |

### ✨ UTXO的优势
- **🔒 更安全** - 每次交易都创建新的输出，难以篡改
- **⚡ 更高效** - 可以并行处理多个交易
- **🔍 更透明** - 每个UTXO都有明确的来源和历史
- **💪 更灵活** - 支持复杂的智能合约逻辑

## 🎮 使用示例

### 📝 基本操作流程

#### 1. 部署合约
```bash
# 🚀 使用工具部署到测试网
./scripts/deploy.sh testnet
# 获得合约地址：0x742d35Cc...
```

#### 2. 查询信息
```bash
# 📋 获取代币基本信息
weisyn call 0x742d35Cc... GetContractInfo

# 💰 查询某地址余额
weisyn call 0x742d35Cc... GetBalance '{"address":"0x123..."}'
```

#### 3. 执行转账
```bash
# 💸 转账100个代币给朋友
weisyn call 0x742d35Cc... Transfer '{
  "to": "0x456...",
  "amount": "100"
}'
```

#### 4. 验证结果
```bash
# ✅ 查询转账后的余额
weisyn call 0x742d35Cc... GetBalance '{"address":"0x456..."}'
# 应该显示余额增加了100
```

## 🛠️ 定制化指南

### 🎯 常见定制需求

#### 1. 修改代币信息
```go
// 📝 在 GetContractInfo() 中修改
"name": "我的社区代币",        // 代币全名
"symbol": "MCT",             // 代币符号
"decimals": 18,              // 小数位数
```

#### 2. 添加转账手续费
```go
func Transfer(params) {
    // 💰 计算手续费（例如：0.1%）
    fee := amount * 0.001
    actualAmount := amount - fee
    
    // 🔄 执行转账
    // ...
}
```

#### 3. 添加暂停功能
```go
var isPaused bool = false

func Transfer(params) {
    // ⏸️ 检查是否暂停
    if isPaused {
        return ERROR_CONTRACT_PAUSED
    }
    // 💸 正常转账逻辑
    // ...
}
```

#### 4. 添加黑名单功能
```go
var blacklist map[string]bool

func Transfer(params) {
    // 🚫 检查黑名单
    if blacklist[from] || blacklist[to] {
        return ERROR_ADDRESS_BLOCKED
    }
    // 💸 正常转账逻辑
    // ...
}
```

## 🧪 测试指南

### 📋 测试检查清单

#### ✅ 基础功能测试
- [ ] 合约部署成功
- [ ] 获取合约信息正常
- [ ] 余额查询功能正确
- [ ] 转账功能正常工作

#### ✅ 边界条件测试  
- [ ] 余额不足时转账失败
- [ ] 转账金额为0的情况
- [ ] 转账给自己的情况
- [ ] 无效地址的处理

#### ✅ 安全性测试
- [ ] 不能转账他人的代币
- [ ] 事件正确发出
- [ ] 状态更新一致
- [ ] 错误处理完善

## 📚 进阶学习

### 🚀 下一步学习建议

1. **📖 深入理解** (30分钟)
   - 研究标准代币模板 `templates/standard/token/`
   - 理解ERC20标准和扩展功能

2. **🛠️ 功能扩展** (1小时)
   - 添加授权转账功能
   - 实现代币铸造和销毁
   - 加入多重签名支持

3. **🔒 安全提升** (45分钟)
   - 学习常见攻击方式和防护
   - 添加访问控制机制
   - 实现紧急暂停功能

4. **🎯 实际应用** (开放时间)
   - 为你的项目/社区设计代币经济
   - 考虑激励机制和治理模式
   - 规划代币分发策略

### 🤝 获得帮助

- **📖 文档**: [../../../BEGINNER_GUIDE.md](../../../BEGINNER_GUIDE.md)
- **💡 概念**: [../../../CONCEPTS.md](../../../CONCEPTS.md)
- **🔧 工具**: `../../../tools/beginner/`
- **💬 社区**: GitHub Issues 或开发者群组

---

## 🎊 恭喜你！

完成这个代币合约学习后，你已经掌握了：
- ✅ 区块链代币的基本概念和运作机制
- ✅ WES独特的UTXO资产管理模式
- ✅ 智能合约的基础开发和测试方法
- ✅ 代币合约的定制和扩展技巧

**🚀 你现在可以**：
- 💰 为任何项目创建代币
- 🔧 根据需求定制功能
- 🧪 独立测试和部署
- 📈 设计代币经济模型

**下一步**：尝试 [basic-nft](../basic-nft/) 学习NFT开发，或者开始你的第一个真实代币项目！
